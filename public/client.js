// Generated by Haxe 4.0.0-preview.4+1e3e5e016
(function ($global) { "use strict";
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = {},$_;
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var Client = function() {
	var app = firebase.initializeApp({ apiKey : "AIzaSyBGLErhUSfQHA4wOtkid206KVE-96QEN04", authDomain : "fb-stack.firebaseapp.com", databaseURL : "https://fb-stack.firebaseio.com", projectId : "fb-stack", storageBucket : "fb-stack.appspot.com", messagingSenderId : "665827748546"});
	utils_Profile.instance.init();
	model_ContentTreeModel.instance.init();
	model_ContentTreeModel.instance.load();
	model_ContentTreeModel.instance.loadRealtimeUpdate();
	model_UserModel.instance.load(app);
	model_UserModel.instance.loadRealtimeUpdate();
	ui_ClientUI.instance.init();
	model_Routes.instance.init();
};
$hxClasses["Client"] = Client;
Client.__name__ = true;
Client.main = function() {
	new Client();
};
Client.prototype = {
	__class__: Client
};
var DataModes = $hxEnums["DataModes"] = { __ename__ : true, __constructs__ : ["Nil","Loading","Data"]
	,Nil: {_hx_index:0,__enum__:"DataModes",toString:$estr}
	,Loading: {_hx_index:1,__enum__:"DataModes",toString:$estr}
	,Data: ($_=function(d) { return {_hx_index:2,d:d,__enum__:"DataModes",toString:$estr}; },$_.__params__ = ["d"],$_)
};
var _$Client_DataMode_$Impl_$ = {};
$hxClasses["_Client.DataMode_Impl_"] = _$Client_DataMode_$Impl_$;
_$Client_DataMode_$Impl_$.__name__ = true;
_$Client_DataMode_$Impl_$.getData = function(this1) {
	if(this1._hx_index == 2) {
		return this1.d;
	} else {
		return null;
	}
};
_$Client_DataMode_$Impl_$.fromData = function(data) {
	if(data != null) {
		return DataModes.Data(data);
	} else {
		return DataModes.Nil;
	}
};
var DataClass = function() { };
$hxClasses["DataClass"] = DataClass;
DataClass.__name__ = true;
var DateTools = function() { };
$hxClasses["DateTools"] = DateTools;
DateTools.__name__ = true;
DateTools.__format_get = function(d,e) {
	switch(e) {
	case "%":
		return "%";
	case "A":
		return DateTools.DAY_NAMES[d.getDay()];
	case "B":
		return DateTools.MONTH_NAMES[d.getMonth()];
	case "C":
		return StringTools.lpad(Std.string(d.getFullYear() / 100 | 0),"0",2);
	case "D":
		return DateTools.__format(d,"%m/%d/%y");
	case "F":
		return DateTools.__format(d,"%Y-%m-%d");
	case "I":case "l":
		var hour = d.getHours() % 12;
		return StringTools.lpad(Std.string(hour == 0 ? 12 : hour),e == "I" ? "0" : " ",2);
	case "M":
		return StringTools.lpad(Std.string(d.getMinutes()),"0",2);
	case "R":
		return DateTools.__format(d,"%H:%M");
	case "S":
		return StringTools.lpad(Std.string(d.getSeconds()),"0",2);
	case "T":
		return DateTools.__format(d,"%H:%M:%S");
	case "Y":
		return Std.string(d.getFullYear());
	case "a":
		return DateTools.DAY_SHORT_NAMES[d.getDay()];
	case "b":case "h":
		return DateTools.MONTH_SHORT_NAMES[d.getMonth()];
	case "d":
		return StringTools.lpad(Std.string(d.getDate()),"0",2);
	case "e":
		return Std.string(d.getDate());
	case "H":case "k":
		return StringTools.lpad(Std.string(d.getHours()),e == "H" ? "0" : " ",2);
	case "m":
		return StringTools.lpad(Std.string(d.getMonth() + 1),"0",2);
	case "n":
		return "\n";
	case "p":
		if(d.getHours() > 11) {
			return "PM";
		} else {
			return "AM";
		}
		break;
	case "r":
		return DateTools.__format(d,"%I:%M:%S %p");
	case "s":
		return Std.string(d.getTime() / 1000 | 0);
	case "t":
		return "\t";
	case "u":
		var t = d.getDay();
		if(t == 0) {
			return "7";
		} else if(t == null) {
			return "null";
		} else {
			return "" + t;
		}
		break;
	case "w":
		return Std.string(d.getDay());
	case "y":
		return StringTools.lpad(Std.string(d.getFullYear() % 100),"0",2);
	default:
		throw new js__$Boot_HaxeError("Date.format %" + e + "- not implemented yet.");
	}
};
DateTools.__format = function(d,f) {
	var r_b = "";
	var p = 0;
	while(true) {
		var np = f.indexOf("%",p);
		if(np < 0) {
			break;
		}
		var len = np - p;
		r_b += len == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len);
		r_b += Std.string(DateTools.__format_get(d,HxOverrides.substr(f,np + 1,1)));
		p = np + 2;
	}
	var len1 = f.length - p;
	r_b += len1 == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len1);
	return r_b;
};
DateTools.format = function(d,f) {
	return DateTools.__format(d,f);
};
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = true;
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = true;
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Lambda = function() { };
$hxClasses["Lambda"] = Lambda;
Lambda.__name__ = true;
Lambda.has = function(it,elt) {
	var x = $getIterator(it);
	while(x.hasNext()) if(x.next() == elt) {
		return true;
	}
	return false;
};
Lambda.iter = function(it,f) {
	var x = $getIterator(it);
	while(x.hasNext()) f(x.next());
};
Math.__name__ = true;
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = true;
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		return null;
	}
};
Reflect.setProperty = function(o,field,value) {
	var tmp;
	var tmp1;
	if(o.__properties__) {
		tmp = o.__properties__["set_" + field];
		tmp1 = tmp;
	} else {
		tmp1 = false;
	}
	if(tmp1) {
		o[tmp](value);
	} else {
		o[field] = value;
	}
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) {
		v = parseInt(x);
	}
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = true;
StringTools.startsWith = function(s,start) {
	if(s.length >= start.length) {
		return HxOverrides.substr(s,0,start.length) == start;
	} else {
		return false;
	}
};
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	if(slen >= elen) {
		return HxOverrides.substr(s,slen - elen,elen) == end;
	} else {
		return false;
	}
};
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,r,l - r);
	} else {
		return s;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
StringTools.lpad = function(s,c,l) {
	if(c.length <= 0) {
		return s;
	}
	while(s.length < l) s = c + s;
	return s;
};
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = true;
Type.createInstance = function(cl,args) {
	return new (Function.prototype.bind.apply(cl,[null].concat(args)));
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw new js__$Boot_HaxeError("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw new js__$Boot_HaxeError("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw new js__$Boot_HaxeError("Constructor " + constr + " does not need parameters");
	}
	return f;
};
var dataclass_CircularReferenceHandling = $hxEnums["dataclass.CircularReferenceHandling"] = { __ename__ : true, __constructs__ : ["ThrowException","SetToNull","TrackReferences"]
	,ThrowException: {_hx_index:0,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,SetToNull: {_hx_index:1,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,TrackReferences: {_hx_index:2,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
};
var dataclass_Rtti = function() { };
$hxClasses["dataclass.Rtti"] = dataclass_Rtti;
dataclass_Rtti.__name__ = true;
dataclass_Rtti.rttiData = function(cls) {
	return haxe_rtti_Meta.getType(cls)["dataClassRtti"][0];
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = true;
var haxe_ds_StringMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = true;
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,existsReserved: function(key) {
		if(this.rh == null) {
			return false;
		}
		return this.rh.hasOwnProperty("$" + key);
	}
	,__class__: haxe_ds_StringMap
};
var dataclass_Converter = function(options) {
	if(options == null) {
		options = { };
	}
	this.valueConverters = new haxe_ds_StringMap();
	var this1 = this.valueConverters;
	var value = new dataclass_DateValueConverter(Object.prototype.hasOwnProperty.call(options,"dateFormat") ? options.dateFormat : "%Y-%m-%dT%H:%M:%SZ");
	var _this = this1;
	if(__map_reserved["Date"] != null) {
		_this.setReserved("Date",value);
	} else {
		_this.h["Date"] = value;
	}
	this.circularReferences = Object.prototype.hasOwnProperty.call(options,"circularReferences") ? options.circularReferences : dataclass_CircularReferenceHandling.ThrowException;
};
$hxClasses["dataclass.Converter"] = dataclass_Converter;
dataclass_Converter.__name__ = true;
dataclass_Converter.enumType = function(name) {
	var _this = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.enumCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxEnums[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Enum not found: " + name);
	}
	var _this2 = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.classType = function(name) {
	var _this = dataclass_Converter.classCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.classCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxClasses[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Class not found: " + name);
	}
	var _this2 = dataclass_Converter.classCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.prototype = {
	toDataClass: function(cls,json) {
		var refCount = new haxe_ds_IntMap();
		var refAssign = new haxe_ds_IntMap();
		var output = this._toDataClass(cls,json,refCount,refAssign);
		this.assignReferences(refCount,refAssign);
		return output;
	}
	,assignReferences: function(refCount,refAssign) {
		var refId = refAssign.keys();
		while(refId.hasNext()) {
			var refId1 = refId.next();
			var _g = 0;
			var _g1 = refAssign.h[refId1];
			while(_g < _g1.length) {
				var data = _g1[_g];
				++_g;
				Reflect.setProperty(refCount.h[refId1],data.field,refCount.h[data.obj]);
			}
		}
	}
	,_toAnonymousStructure: function(cls,inputData,refCount,refAssign,currentId,toDataClass) {
		var rtti = dataclass_Rtti.rttiData(cls);
		var outputData = { };
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var _g = 0;
		var _g1 = Reflect.fields(rtti);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			if(Object.prototype.hasOwnProperty.call(inputData,field)) {
				var input = inputData[field];
				if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && input != null && StringTools.startsWith(rtti[field],"DataClass<") && Object.prototype.hasOwnProperty.call(input,"$ref")) {
					var refData = { obj : Reflect.field(input,"$ref"), field : field};
					if(!refAssign.h.hasOwnProperty(currentId)) {
						refAssign.h[currentId] = [refData];
					} else {
						refAssign.h[currentId].push(refData);
					}
				} else {
					outputData[field] = this.toField(rtti[field],input,refCount,refAssign,toDataClass);
				}
			}
		}
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && currentId > 0) {
			refCount.h[currentId] = outputData;
		}
		return outputData;
	}
	,_toDataClass: function(cls,json,refCount,refAssign) {
		var inputData = json;
		var currentId = 0;
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var output = Type.createInstance(cls,[this._toAnonymousStructure(cls,inputData,refCount,refAssign,currentId,true)]);
		if(currentId > 0 && this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences) {
			refCount.h[currentId] = output;
		}
		return output;
	}
	,toField: function(data,value,refCount,refAssign,toDataClass) {
		if(value == null) {
			if(StringTools.startsWith(data,"Option<")) {
				return haxe_ds_Option.None;
			} else {
				return value;
			}
		}
		var _this = this.valueConverters;
		if(__map_reserved[data] != null ? _this.existsReserved(data) : _this.h.hasOwnProperty(data)) {
			var _this1 = this.valueConverters;
			return (__map_reserved[data] != null ? _this1.getReserved(data) : _this1.h[data]).input(value);
		} else if(Lambda.has(dataclass_Converter.directConversions,data)) {
			return value;
		} else if(StringTools.startsWith(data,"Array<")) {
			var arrayType = data.substring(6,data.length - 1);
			var _g = [];
			var _g1 = 0;
			var _g2 = js_Boot.__cast(value , Array);
			while(_g1 < _g2.length) _g.push(this.toField(arrayType,_g2[_g1++],refCount,refAssign,toDataClass));
			return _g;
		} else if(StringTools.startsWith(data,"Enum<")) {
			return Type.createEnum(dataclass_Converter.enumType(data.substring(5,data.length - 1)),value);
		} else if(StringTools.startsWith(data,"DataClass<")) {
			var classT = dataclass_Converter.classType(data.substring(10,data.length - 1));
			if(toDataClass) {
				return this._toDataClass(classT,value,refCount,refAssign);
			} else {
				return this._toAnonymousStructure(classT,value,refCount,refAssign,0,toDataClass);
			}
		} else if(StringTools.startsWith(data,"Option<")) {
			return haxe_ds_Option.Some(this.toField(data.substring(7,data.length - 1),value,refCount,refAssign,toDataClass));
		} else if(StringTools.startsWith(data,"StringMap<")) {
			var mapType = data.substring(10,data.length - 1);
			var output = new haxe_ds_StringMap();
			var object = value;
			var _g3 = 0;
			var _g11 = Reflect.fields(object);
			while(_g3 < _g11.length) {
				var key = _g11[_g3];
				++_g3;
				var value1 = this.toField(mapType,object[key],refCount,refAssign,toDataClass);
				if(__map_reserved[key] != null) {
					output.setReserved(key,value1);
				} else {
					output.h[key] = value1;
				}
			}
			return output;
		} else if(StringTools.startsWith(data,"IntMap<")) {
			var mapType1 = data.substring(7,data.length - 1);
			var output1 = new haxe_ds_IntMap();
			var object1 = value;
			var _g4 = 0;
			var _g12 = Reflect.fields(object1);
			while(_g4 < _g12.length) {
				var key1 = _g12[_g4];
				++_g4;
				var key2 = Std.parseInt(key1);
				var value2 = this.toField(mapType1,object1[key1],refCount,refAssign,toDataClass);
				output1.h[key2] = value2;
			}
			return output1;
		} else {
			throw new js__$Boot_HaxeError("Unsupported DataClass converter: " + data);
		}
	}
	,__class__: dataclass_Converter
};
var dataclass_DateValueConverter = function(format) {
	this.format = format;
};
$hxClasses["dataclass.DateValueConverter"] = dataclass_DateValueConverter;
dataclass_DateValueConverter.__name__ = true;
dataclass_DateValueConverter.getTimeZone = function() {
	var now = new Date();
	now = new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);
	return 86400000. * Math.round(now.getTime() / 24 / 3600 / 1000) - now.getTime();
};
dataclass_DateValueConverter.prototype = {
	input: function(input) {
		var s = StringTools.trim(input);
		if(StringTools.endsWith(s,"Z")) {
			return new Date(s);
		}
		return HxOverrides.strDate(s);
	}
	,output: function(input) {
		var time;
		if(StringTools.endsWith(this.format,"Z")) {
			var t = -dataclass_DateValueConverter.getTimeZone();
			time = new Date(input.getTime() + t);
		} else {
			time = input;
		}
		return DateTools.format(time,this.format);
	}
	,__class__: dataclass_DateValueConverter
};
var dataclass_JsonConverter = function(options) {
	dataclass_Converter.call(this,options);
};
$hxClasses["dataclass.JsonConverter"] = dataclass_JsonConverter;
dataclass_JsonConverter.__name__ = true;
dataclass_JsonConverter.fromJson = function(cls,json) {
	return dataclass_JsonConverter.current.toDataClass(cls,json);
};
dataclass_JsonConverter.__super__ = dataclass_Converter;
dataclass_JsonConverter.prototype = $extend(dataclass_Converter.prototype,{
	__class__: dataclass_JsonConverter
});
var haxe_Timer = function(time_ms) {
	var me = this;
	this.id = setInterval(function() {
		me.run();
	},time_ms);
};
$hxClasses["haxe.Timer"] = haxe_Timer;
haxe_Timer.__name__ = true;
haxe_Timer.delay = function(f,time_ms) {
	var t = new haxe_Timer(time_ms);
	t.run = function() {
		t.stop();
		f();
	};
	return t;
};
haxe_Timer.prototype = {
	stop: function() {
		if(this.id == null) {
			return;
		}
		clearInterval(this.id);
		this.id = null;
	}
	,run: function() {
	}
	,__class__: haxe_Timer
};
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = true;
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	keys: function() {
		var a = [];
		for( var key in this.h ) if(this.h.hasOwnProperty(key)) {
			a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_Option = $hxEnums["haxe.ds.Option"] = { __ename__ : true, __constructs__ : ["Some","None"]
	,Some: ($_=function(v) { return {_hx_index:0,v:v,__enum__:"haxe.ds.Option",toString:$estr}; },$_.__params__ = ["v"],$_)
	,None: {_hx_index:1,__enum__:"haxe.ds.Option",toString:$estr}
};
var haxe_rtti_Meta = function() { };
$hxClasses["haxe.rtti.Meta"] = haxe_rtti_Meta;
haxe_rtti_Meta.__name__ = true;
haxe_rtti_Meta.getType = function(t) {
	var meta = haxe_rtti_Meta.getMeta(t);
	if(meta == null || meta.obj == null) {
		return { };
	} else {
		return meta.obj;
	}
};
haxe_rtti_Meta.getMeta = function(t) {
	return t.__meta__;
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
$hxClasses["js._Boot.HaxeError"] = js__$Boot_HaxeError;
js__$Boot_HaxeError.__name__ = true;
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = true;
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s += "\t";
				var tmp = n + "(";
				var _g = [];
				var _g1 = 0;
				var _g2 = con.__params__;
				while(_g1 < _g2.length) {
					var p = _g2[_g1];
					++_g1;
					_g.push(js_Boot.__string_rec(o[p],s));
				}
				return tmp + _g.join(",") + ")";
			} else {
				return n;
			}
		}
		if((o instanceof Array)) {
			var l = o.length;
			var i;
			var str = "[";
			s += "\t";
			var _g11 = 0;
			var _g3 = l;
			while(_g11 < _g3) {
				var i1 = _g11++;
				str += (i1 > 0 ? "," : "") + js_Boot.__string_rec(o[i1],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e1 ) {
			var e2 = (e1 instanceof js__$Boot_HaxeError) ? e1.val : e1;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str1 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str1.length != 2) {
			str1 += ", \n";
		}
		str1 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str1 += "\n" + s + "}";
		return str1;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = intf[_g1++];
			if(i == cl || js_Boot.__interfLoop(i,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		if((o instanceof Array)) {
			return o.__enum__ == null;
		} else {
			return false;
		}
		break;
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return true;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if((o instanceof cl)) {
					return true;
				}
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if((o instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return $hxEnums[o.__enum__] == cl;
	}
};
js_Boot.__cast = function(o,t) {
	if(js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw new js__$Boot_HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var mithril__$M_M_$Impl_$ = function() { };
$hxClasses["mithril._M.M_Impl_"] = mithril__$M_M_$Impl_$;
mithril__$M_M_$Impl_$.__name__ = true;
mithril__$M_M_$Impl_$.routeLink = function(vnode) {
	return m.route.link(vnode);
};
var mithril_Mithril = function() { };
$hxClasses["mithril.Mithril"] = mithril_Mithril;
mithril_Mithril.__name__ = true;
var model_ApiCalls = function() { };
$hxClasses["model.ApiCalls"] = model_ApiCalls;
model_ApiCalls.__name__ = true;
model_ApiCalls.getAuthRequest = function(url) {
	return model_UserModel.instance.getFBUserToken().then(function(token) {
		var request = { method : "get", url : url, headers : { authorization : "Bearer " + token}};
		model_ErrorsAndLogs.addLog("AuthRequest: " + url);
		return m.request(request);
	});
};
model_ApiCalls.getRequest = function(url) {
	model_ErrorsAndLogs.addLog("Request: " + url);
	return m.request({ method : "get", url : url});
};
var model_ContentItemModel = function() {
	this.contentItem = model_ContentItemType.RoomType({ treeId : "active-tree", roomId : "kak"});
};
$hxClasses["model.ContentItemModel"] = model_ContentItemModel;
model_ContentItemModel.__name__ = true;
model_ContentItemModel.prototype = {
	set_contentItem: function(item) {
		this.contentItem = item;
		m.redraw();
		return this.contentItem;
	}
	,__class__: model_ContentItemModel
	,__properties__: {set_contentItem:"set_contentItem"}
};
var model_ContentItemType = $hxEnums["model.ContentItemType"] = { __ename__ : true, __constructs__ : ["RoomType","ShelfType","BookType","ChapterType","SubchapterType","HomeType","BlaBla","Loading"]
	,RoomType: ($_=function(ref) { return {_hx_index:0,ref:ref,__enum__:"model.ContentItemType",toString:$estr}; },$_.__params__ = ["ref"],$_)
	,ShelfType: ($_=function(ref) { return {_hx_index:1,ref:ref,__enum__:"model.ContentItemType",toString:$estr}; },$_.__params__ = ["ref"],$_)
	,BookType: ($_=function(ref) { return {_hx_index:2,ref:ref,__enum__:"model.ContentItemType",toString:$estr}; },$_.__params__ = ["ref"],$_)
	,ChapterType: ($_=function(ref) { return {_hx_index:3,ref:ref,__enum__:"model.ContentItemType",toString:$estr}; },$_.__params__ = ["ref"],$_)
	,SubchapterType: ($_=function(ref) { return {_hx_index:4,ref:ref,__enum__:"model.ContentItemType",toString:$estr}; },$_.__params__ = ["ref"],$_)
	,HomeType: {_hx_index:5,__enum__:"model.ContentItemType",toString:$estr}
	,BlaBla: {_hx_index:6,__enum__:"model.ContentItemType",toString:$estr}
	,Loading: {_hx_index:7,__enum__:"model.ContentItemType",toString:$estr}
};
var model_ContentTreeModel = function() {
	this.contentTree = DataModes.Nil;
};
$hxClasses["model.ContentTreeModel"] = model_ContentTreeModel;
model_ContentTreeModel.__name__ = true;
model_ContentTreeModel.defaultData = function() {
	return { id : "startup", rooms : [{ id : "startup-room", shelves : []}]};
};
model_ContentTreeModel.prototype = {
	init: function() {
		this.set_contentTree(DataModes.Data(dataclass_JsonConverter.fromJson(model_ContentTree,model_ContentTreeModel.defaultData())));
	}
	,load: function() {
		var _gthis = this;
		model_ApiCalls.getRequest("/api/content-tree").then(function(item) {
			model_ErrorsAndLogs.addErrors(item.errors);
			_gthis.set_contentTree(_$Client_DataMode_$Impl_$.fromData(new model_ContentTree(item.data)));
			model_ErrorsAndLogs.addLog("Content-tree loaded " + utils_Profile.instance.msString());
			return;
		})["catch"](function(error) {
			model_ErrorsAndLogs.addError("Content-tree error: " + error);
			return;
		});
	}
	,loadRealtimeUpdate: function() {
		var _gthis = this;
		firebase.database().ref("content-tree").on("value",function(snap,str) {
			try {
				model_ErrorsAndLogs.addLog("Realtime content loaded!" + utils_Profile.instance.msString());
				var tmp = snap.val();
				return _gthis.set_contentTree(_$Client_DataMode_$Impl_$.fromData(new model_ContentTree(tmp)));
			} catch( e ) {
				(e instanceof js__$Boot_HaxeError);
				model_ErrorsAndLogs.addError("Could not insantiate contentTree from loaded Realtime data");
				return null;
			}
		});
	}
	,set_contentTree: function(u) {
		this.contentTree = u;
		m.redraw();
		return u;
	}
	,__class__: model_ContentTreeModel
	,__properties__: {set_contentTree:"set_contentTree"}
};
var model_ContentTreeFilters = function() { };
$hxClasses["model.ContentTreeFilters"] = model_ContentTreeFilters;
model_ContentTreeFilters.__name__ = true;
model_ContentTreeFilters.filterHomeRoom = function(contentTree) {
	var user = _$Client_DataMode_$Impl_$.getData(model_UserModel.instance.currentUser);
	var contentTree1 = _$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree);
	var room = user != null ? model_ContentTreeFilters.filterRoom(contentTree1,user.userConfig.domain) : contentTree1.rooms[0];
	if(user != null && room == null) {
		model_ErrorsAndLogs.addError("ContentTreeFilters::filterHomeRoom() - Can not filter to user's domain room " + user.userConfig.domain);
	}
	return room;
};
model_ContentTreeFilters.filterRoom = function(contentTree,roomId) {
	return contentTree.rooms.filter(function(room) {
		return room.id == roomId;
	})[0];
};
model_ContentTreeFilters.filterShelf = function(room,shelfId) {
	return room.shelves.filter(function(shelf) {
		return shelf.id == shelfId;
	})[0];
};
model_ContentTreeFilters.filterBook = function(shelf,bookId) {
	return shelf.books.filter(function(book) {
		return book.id == bookId;
	})[0];
};
model_ContentTreeFilters.filterChapter = function(book,chapterId) {
	return book.chapters.filter(function(chapter) {
		return chapter.id == chapterId;
	})[0];
};
model_ContentTreeFilters.filterSubchapter = function(chapter,subchapterId) {
	return chapter.chapters.filter(function(chapter1) {
		return chapter1.id == subchapterId;
	})[0];
};
var model_ContentTree = function(data) {
	this.rooms = [];
	this.set_id(data.id);
	if(Object.prototype.hasOwnProperty.call(data,"rooms")) {
		this.set_rooms(data.rooms);
	}
};
$hxClasses["model.ContentTree"] = model_ContentTree;
model_ContentTree.__name__ = true;
model_ContentTree.__interfaces__ = [DataClass];
model_ContentTree.populate = function(id,rms) {
	id = id == null ? "contentTree" + model_ContentTree.uid++ : id;
	return new model_ContentTree({ id : id, rooms : rms});
};
model_ContentTree.validate = function(data) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data,"id")) {
		output.push("id");
	} else if(data.id == null) {
		output.push("id");
	}
	return output;
};
model_ContentTree.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ContentTree.id.");
		}
		return this.id = v;
	}
	,set_rooms: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ContentTree.rooms.");
		}
		return this.rooms = v;
	}
	,__class__: model_ContentTree
	,__properties__: {set_rooms:"set_rooms",set_id:"set_id"}
};
var model_Room = function(data) {
	this.textcolor = "black";
	this.color = "yellow";
	this.title = "room-title";
	this.shelves = [];
	this.set_id(data.id);
	if(Object.prototype.hasOwnProperty.call(data,"shelves")) {
		this.set_shelves(data.shelves);
	}
	if(Object.prototype.hasOwnProperty.call(data,"title")) {
		this.set_title(data.title);
	}
	if(Object.prototype.hasOwnProperty.call(data,"color")) {
		this.set_color(data.color);
	}
	if(Object.prototype.hasOwnProperty.call(data,"textcolor")) {
		this.set_textcolor(data.textcolor);
	}
};
$hxClasses["model.Room"] = model_Room;
model_Room.__name__ = true;
model_Room.__interfaces__ = [DataClass];
model_Room.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.id.");
		}
		return this.id = v;
	}
	,set_shelves: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.shelves.");
		}
		return this.shelves = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.title.");
		}
		return this.title = v;
	}
	,set_color: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.color.");
		}
		return this.color = v;
	}
	,set_textcolor: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.textcolor.");
		}
		return this.textcolor = v;
	}
	,__class__: model_Room
	,__properties__: {set_textcolor:"set_textcolor",set_color:"set_color",set_title:"set_title",set_shelves:"set_shelves",set_id:"set_id"}
};
var model_Shelf = function(data) {
	this.books = [];
	this.set_id(data.id);
	this.set_title(data.title);
	this.set_access(data.access);
	this.set_info(data.info);
	if(Object.prototype.hasOwnProperty.call(data,"books")) {
		this.set_books(data.books);
	}
};
$hxClasses["model.Shelf"] = model_Shelf;
model_Shelf.__name__ = true;
model_Shelf.__interfaces__ = [DataClass];
model_Shelf.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.access.");
		}
		return this.access = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.info.");
		}
		return this.info = v;
	}
	,set_books: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.books.");
		}
		return this.books = v;
	}
	,__class__: model_Shelf
	,__properties__: {set_books:"set_books",set_info:"set_info",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var model_Booktype = $hxEnums["model.Booktype"] = { __ename__ : true, __constructs__ : ["Standard","Lexicon"]
	,Standard: {_hx_index:0,__enum__:"model.Booktype",toString:$estr}
	,Lexicon: {_hx_index:1,__enum__:"model.Booktype",toString:$estr}
};
var model_Book = function(data) {
	this.chapters = [];
	this.set_id(data.id);
	this.set_title(data.title);
	this.set_access(data.access);
	this.set_type(data.type);
	this.set_info(data.info);
	if(Object.prototype.hasOwnProperty.call(data,"chapters")) {
		this.set_chapters(data.chapters);
	}
};
$hxClasses["model.Book"] = model_Book;
model_Book.__name__ = true;
model_Book.__interfaces__ = [DataClass];
model_Book.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.info.");
		}
		return this.info = v;
	}
	,set_chapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.chapters.");
		}
		return this.chapters = v;
	}
	,__class__: model_Book
	,__properties__: {set_chapters:"set_chapters",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var model_Chaptertype = $hxEnums["model.Chaptertype"] = { __ename__ : true, __constructs__ : ["Info","Article","Video","Exercise"]
	,Info: {_hx_index:0,__enum__:"model.Chaptertype",toString:$estr}
	,Article: {_hx_index:1,__enum__:"model.Chaptertype",toString:$estr}
	,Video: {_hx_index:2,__enum__:"model.Chaptertype",toString:$estr}
	,Exercise: {_hx_index:3,__enum__:"model.Chaptertype",toString:$estr}
};
var model_Chapter = function(data) {
	this.chapters = [];
	this.set_id(data.id);
	this.set_title(data.title);
	this.set_access(data.access);
	this.set_type(data.type);
	this.set_info(data.info);
	this.set_text(data.text);
	if(Object.prototype.hasOwnProperty.call(data,"chapters")) {
		this.set_chapters(data.chapters);
	}
};
$hxClasses["model.Chapter"] = model_Chapter;
model_Chapter.__name__ = true;
model_Chapter.__interfaces__ = [DataClass];
model_Chapter.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.info.");
		}
		return this.info = v;
	}
	,set_text: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.text.");
		}
		return this.text = v;
	}
	,set_chapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.chapters.");
		}
		return this.chapters = v;
	}
	,__class__: model_Chapter
	,__properties__: {set_chapters:"set_chapters",set_text:"set_text",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var model_ErrorsAndLogs = function() { };
$hxClasses["model.ErrorsAndLogs"] = model_ErrorsAndLogs;
model_ErrorsAndLogs.__name__ = true;
model_ErrorsAndLogs.addLog = function(log) {
	model_ErrorsAndLogs.logs.unshift(log);
	m.redraw();
};
model_ErrorsAndLogs.addErrors = function(err) {
	Lambda.iter(err,function(e) {
		model_ErrorsAndLogs.addError(e);
		return;
	});
};
model_ErrorsAndLogs.addError = function(e) {
	model_ErrorsAndLogs.errors.unshift(e);
	m.redraw();
};
var model_Routes = function() {
	this.subchapterHandler = { onmatch : function(args,path) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.SubchapterType({ treeId : args["treeId"], roomId : args["roomId"], shelfId : args["shelfId"], bookId : args["bookId"], chapterId : args["chapterId"], subchapterId : args["subachapterId"]}));
		} catch( e ) {
			model_ErrorsAndLogs.addError("RouteResolver subchapterHandler Error: " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
		}
		return null;
	}, render : function(vnode) {
		return m.m("div","RouteHandler");
	}};
	this.chapterHandler = { onmatch : function(args1,path1) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.ChapterType({ treeId : args1["treeId"], roomId : args1["roomId"], shelfId : args1["shelfId"], bookId : args1["bookId"], chapterId : args1["chapterId"]}));
		} catch( e1 ) {
			model_ErrorsAndLogs.addError("RouteResolver chapterHandler Error: " + Std.string((e1 instanceof js__$Boot_HaxeError) ? e1.val : e1));
		}
		return null;
	}, render : function(vnode1) {
		return m.m("div","RouteHandler");
	}};
	this.bookHandler = { onmatch : function(args2,path2) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.BookType({ treeId : args2["treeId"], roomId : args2["roomId"], shelfId : args2["shelfId"], bookId : args2["bookId"]}));
		} catch( e2 ) {
			model_ErrorsAndLogs.addError("RouteResolver bookHandler Error: " + Std.string((e2 instanceof js__$Boot_HaxeError) ? e2.val : e2));
		}
		return null;
	}, render : function(vnode2) {
		return m.m("div","RouteHandler");
	}};
	this.shelfHandler = { onmatch : function(args3,path3) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.ShelfType({ treeId : args3["treeId"], roomId : args3["roomId"], shelfId : args3["shelfId"]}));
		} catch( e3 ) {
			model_ErrorsAndLogs.addError("RouteResolver ShelfHandler Error: " + Std.string((e3 instanceof js__$Boot_HaxeError) ? e3.val : e3));
		}
		return null;
	}, render : function(vnode3) {
		return m.m("div","RouteHandler");
	}};
	this.roomHandler = { onmatch : function(args4,path4) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.RoomType({ treeId : args4["treeId"], roomId : args4["roomId"]}));
		} catch( e4 ) {
			model_ErrorsAndLogs.addError("RouteResolver roomHandler Error: " + Std.string((e4 instanceof js__$Boot_HaxeError) ? e4.val : e4));
		}
		return null;
	}, render : function(vnode4) {
		return m.m("div","RouteHandler");
	}};
	this.homeHandler = { onmatch : function(args5,path5) {
		try {
			model_ContentItemModel.instance.set_contentItem(model_ContentItemType.HomeType);
		} catch( e5 ) {
			model_ErrorsAndLogs.addError("RouteResolver roomHandler Error: " + Std.string((e5 instanceof js__$Boot_HaxeError) ? e5.val : e5));
		}
		return null;
	}, render : function(vnode5) {
		return m.m("div","RouteHandler");
	}};
};
$hxClasses["model.Routes"] = model_Routes;
model_Routes.__name__ = true;
model_Routes.prototype = {
	init: function() {
		var routeHandler = { onmatch : function(args,path) {
			console.log("src/model/Routes.hx:23:",args);
			console.log("src/model/Routes.hx:24:",path);
			model_ErrorsAndLogs.addLog("RouteResolver:" + path + ": " + Std.string(args) + "");
			return null;
		}, render : function(vnode) {
			return m.m("div","RouteHandler");
		}};
		var routes = { "/" : this.homeHandler, "/yxa" : routeHandler, "/room/:treeId/:roomId" : this.roomHandler, "/shelf/:treeId/:roomId/:shelfId" : this.shelfHandler, "/book/:treeId/:roomId/:shelfId/:bookId" : this.bookHandler, "/chapter/:treeId/:roomId/:shelfId/:bookId/:chapterId" : this.chapterHandler, "/subchapter/:treeId/:roomId/:shelfId/:bookId/:chapterId/:subchapterId" : this.subchapterHandler};
		m.route(window.document.querySelector("#routes"),"/",routes);
	}
	,__class__: model_Routes
};
var model_UserModel = function() {
	this.currentUser = DataModes.Nil;
};
$hxClasses["model.UserModel"] = model_UserModel;
model_UserModel.__name__ = true;
model_UserModel.prototype = {
	set_currentUser: function(u) {
		if(this.currentUser == DataModes.Nil && u == DataModes.Nil) {
			return null;
		}
		if(this.currentUser == DataModes.Loading && u == DataModes.Loading) {
			return null;
		}
		this.currentUser = u;
		m.redraw();
		return u;
	}
	,load: function(app) {
		model_UserModel.instance.set_currentUser(DataModes.Loading);
		app.auth().onAuthStateChanged(function(user) {
			if(user != null) {
				model_ErrorsAndLogs.addLog("Browser session user found.");
				model_UserModel.instance.set_currentUser(DataModes.Loading);
				return model_ApiCalls.getAuthRequest("/api/userconfig").then(function(data) {
					model_UserModel.instance.set_currentUser(DataModes.Data(new model_CurrentUser(data)));
					model_ErrorsAndLogs.addLog("UserModel loaded" + utils_Profile.instance.msString());
					model_ErrorsAndLogs.addErrors(data.errors);
					return;
				})["catch"](function(error) {
					model_ErrorsAndLogs.addError("Could not load userconfig for browser session user");
					model_ErrorsAndLogs.addError(error);
					return;
				});
			} else {
				model_ErrorsAndLogs.addLog("No browser session user found.");
				model_UserModel.instance.set_currentUser(DataModes.Nil);
				return null;
			}
		},function(error1) {
			model_ErrorsAndLogs.addLog("Error: " + Std.string(error1));
			return model_UserModel.instance.set_currentUser(DataModes.Nil);
		});
	}
	,loadRealtimeUpdate: function() {
		var _gthis = this;
		haxe_Timer.delay(function() {
			try {
				if(_$Client_DataMode_$Impl_$.getData(_gthis.currentUser) != null) {
					var userEmail = _$Client_DataMode_$Impl_$.getData(_gthis.currentUser).userData.email;
					console.log("src/model/UserModel.hx:67:",userEmail);
					var dbpath = "users/" + utils__$UserEmail_UserEmail_$Impl_$.toPiped(userEmail);
					console.log("src/model/UserModel.hx:70:","dbpath: " + dbpath);
					firebase.database().ref(dbpath).on("value",function(snap,str) {
						var userCopy = _$Client_DataMode_$Impl_$.getData(_gthis.currentUser);
						var data = snap.val();
						data.email = userEmail;
						model_ErrorsAndLogs.addLog("UserModel UserData realtime update active");
						userCopy.set_userData(dataclass_JsonConverter.fromJson(model_UserData,data));
						return _gthis.set_currentUser(DataModes.Data(userCopy));
					});
					var dbpath1 = "user-config/" + utils__$UserEmail_UserEmail_$Impl_$.toPiped(userEmail);
					return firebase.database().ref(dbpath1).on("value",function(snap1,str1) {
						model_ErrorsAndLogs.addLog("UserModel User Config realtime update active");
						var data1 = snap1.val();
						var userCopy1 = _$Client_DataMode_$Impl_$.getData(_gthis.currentUser);
						userCopy1.set_userConfig(dataclass_JsonConverter.fromJson(model_UserConfig,data1));
						return _gthis.set_currentUser(DataModes.Data(userCopy1));
					});
				} else {
					model_ErrorsAndLogs.addLog("Can not use Realtime data for anonymous user.");
					return null;
				}
			} catch( e ) {
				model_ErrorsAndLogs.addError("initRealtimeDatabase error: " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
				return null;
			}
		},3000);
	}
	,signIn: function(email,password) {
		this.validate(email,password).then(function(valid) {
			model_UserModel.instance.set_currentUser(DataModes.Loading);
			return firebase.auth().signInWithEmailAndPassword(email,password);
		}).then(function(user) {
			console.log("src/model/UserModel.hx:108:","USER " + user);
			return null;
		})["catch"](function(error) {
			console.log("src/model/UserModel.hx:112:","ERROR" + error);
			model_ErrorsAndLogs.addError("error:" + error);
			model_UserModel.instance.set_currentUser(DataModes.Nil);
			return;
		});
	}
	,signOut: function() {
		firebase.auth().signOut();
	}
	,validate: function(email,password) {
		return new Promise(function(res,rej) {
			try {
				if(!utils__$UserEmail_UserEmail_$Impl_$.isValid(email)) {
					throw new js__$Boot_HaxeError("User email is not valid: " + email);
				}
				if(!utils__$UserPassword_UserPassword_$Impl_$.isValid(password)) {
					throw new js__$Boot_HaxeError("User password is not valid: " + password);
				}
				res(true);
			} catch( e ) {
				rej((e instanceof js__$Boot_HaxeError) ? e.val : e);
			}
			return;
		});
	}
	,getFBCurrentUser: function() {
		return firebase.auth().currentUser;
	}
	,getFBUserToken: function() {
		if(this.getFBCurrentUser() != null) {
			return this.getFBCurrentUser().getIdToken();
		} else {
			return new Promise(function(res,rej) {
				rej("Firebase.auth().currentUser == null");
				return;
			});
		}
	}
	,__class__: model_UserModel
	,__properties__: {set_currentUser:"set_currentUser"}
};
var model_CurrentUser = function(data) {
	this.set_userData(data.userData);
	this.set_userConfig(data.userConfig);
};
$hxClasses["model.CurrentUser"] = model_CurrentUser;
model_CurrentUser.__name__ = true;
model_CurrentUser.__interfaces__ = [DataClass];
model_CurrentUser.prototype = {
	set_userData: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for CurrentUser.userData.");
		}
		return this.userData = v;
	}
	,set_userConfig: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for CurrentUser.userConfig.");
		}
		return this.userConfig = v;
	}
	,__class__: model_CurrentUser
	,__properties__: {set_userConfig:"set_userConfig",set_userData:"set_userData"}
};
var model_UserData = function(data) {
	this.access = 1;
	this.domains = ["kak"];
	this.set_firstname(data.firstname);
	this.set_lastname(data.lastname);
	this.set_email(data.email);
	if(Object.prototype.hasOwnProperty.call(data,"domains")) {
		this.set_domains(data.domains);
	}
	if(Object.prototype.hasOwnProperty.call(data,"access")) {
		this.set_access(data.access);
	}
};
$hxClasses["model.UserData"] = model_UserData;
model_UserData.__name__ = true;
model_UserData.__interfaces__ = [DataClass];
model_UserData.validate = function(data) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data,"firstname")) {
		output.push("firstname");
	} else if(data.firstname == null) {
		output.push("firstname");
	}
	if(!Object.prototype.hasOwnProperty.call(data,"lastname")) {
		output.push("lastname");
	} else if(data.lastname == null) {
		output.push("lastname");
	}
	if(!Object.prototype.hasOwnProperty.call(data,"email")) {
		output.push("email");
	} else if(data.email == null) {
		output.push("email");
	}
	return output;
};
model_UserData.prototype = {
	set_firstname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.firstname.");
		}
		return this.firstname = v;
	}
	,set_lastname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.lastname.");
		}
		return this.lastname = v;
	}
	,set_email: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.email.");
		}
		return this.email = v;
	}
	,set_domains: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.domains.");
		}
		return this.domains = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.access.");
		}
		return this.access = v;
	}
	,__class__: model_UserData
	,__properties__: {set_access:"set_access",set_domains:"set_domains",set_email:"set_email",set_lastname:"set_lastname",set_firstname:"set_firstname"}
};
var model_UserConfig = function(data) {
	this.set_domain(data.domain);
};
$hxClasses["model.UserConfig"] = model_UserConfig;
model_UserConfig.__name__ = true;
model_UserConfig.__interfaces__ = [DataClass];
model_UserConfig.validate = function(data) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data,"domain")) {
		output.push("domain");
	} else if(data.domain == null) {
		output.push("domain");
	}
	return output;
};
model_UserConfig.prototype = {
	set_domain: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserConfig.domain.");
		}
		return this.domain = v;
	}
	,__class__: model_UserConfig
	,__properties__: {set_domain:"set_domain"}
};
var ui_ClientUI = function() {
};
$hxClasses["ui.ClientUI"] = ui_ClientUI;
ui_ClientUI.__name__ = true;
ui_ClientUI.prototype = {
	init: function() {
		var element = ($_=window.document,$bind($_,$_.querySelector));
		m.mount(element("header"),new ui_UIHeader());
		m.mount(element("main"),new ui_UIMain());
	}
	,__class__: ui_ClientUI
};
var ui_UIMain = function() {
};
$hxClasses["ui.UIMain"] = ui_UIMain;
ui_UIMain.__name__ = true;
ui_UIMain.__interfaces__ = [mithril_Mithril];
ui_UIMain.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var filter;
		var _g = model_UserModel.instance.currentUser;
		if(_g._hx_index == 2) {
			var currentUser = _g.d;
			filter = { filterRooms : [currentUser.userConfig.domain], filterAccess : currentUser.userData.access};
		} else {
			filter = { filterRooms : ["kak"], filterAccess : 0};
		}
		return [new ui_content_ContentTreeView(filter).view(),new ui_content_ContentItemView().view(),new ui_StateMonitor().view()];
	}
	,__class__: ui_UIMain
};
var ui_StateMonitor = function() {
};
$hxClasses["ui.StateMonitor"] = ui_StateMonitor;
ui_StateMonitor.__name__ = true;
ui_StateMonitor.__interfaces__ = [mithril_Mithril];
ui_StateMonitor.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("div.statelabel","logs:"),m.m("div.stateitems",model_ErrorsAndLogs.logs.map(function(e) {
			return m.m("div.stateitem.statelog","" + e);
		})),m.m("div.statelabel","errors:"),m.m("div.stateitems",model_ErrorsAndLogs.errors.map(function(e1) {
			return m.m("div.stateitem.stateerror","" + e1);
		})),m.m("div.statelabel","content-tree"),m.m("div.stateitems","" + Std.string(model_ContentTreeModel.instance.contentTree))]);
	}
	,__class__: ui_StateMonitor
};
var ui_MInputEmail = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputEmail"] = ui_MInputEmail;
ui_MInputEmail.__name__ = true;
ui_MInputEmail.__interfaces__ = [mithril_Mithril];
ui_MInputEmail.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=input][placeholder='Email']#email",{ style : { backgroundColor : this.state.validEmail ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserEmail_UserEmail_$Impl_$.isValid(str);
		console.log("src/ui/ClientUI.hx:114:","" + str + " Is valid email: " + (valid == null ? "null" : "" + valid));
		this.state.email = str;
		this.state.validEmail = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputEmail
};
var ui_MInputPassword = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputPassword"] = ui_MInputPassword;
ui_MInputPassword.__name__ = true;
ui_MInputPassword.__interfaces__ = [mithril_Mithril];
ui_MInputPassword.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=password][placeholder='Password']#password",{ style : { backgroundColor : this.state.validPassword ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserPassword_UserPassword_$Impl_$.isValid(str);
		console.log("src/ui/ClientUI.hx:131:","" + str + " Is valid password: " + (valid == null ? "null" : "" + valid));
		this.state.password = str;
		this.state.validPassword = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputPassword
};
var ui_MLoginForm = function() {
	this.submitCallback = function(email,password) {
		console.log("src/ui/ClientUI.hx:157:","callback " + email + ", " + password);
		return;
	};
	this.state = null;
	this.state = { email : "", validEmail : false, password : "", validPassword : false};
};
$hxClasses["ui.MLoginForm"] = ui_MLoginForm;
ui_MLoginForm.__name__ = true;
ui_MLoginForm.__interfaces__ = [mithril_Mithril];
ui_MLoginForm.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var enabled = this.state.validEmail && this.state.validPassword;
		var disabledString = enabled ? "" : "[disabled]";
		return m.m("form",[new ui_MInputEmail(this.state).view(),new ui_MInputPassword(this.state).view(),m.m("button[type=button]" + disabledString,{ onclick : function(e) {
			_gthis.submitCallback(_gthis.state.email,_gthis.state.password);
			return;
		}},"Logga in")]);
	}
	,__class__: ui_MLoginForm
};
var ui_MLogoutForm = function(clientUser) {
	this.clientUser = clientUser;
};
$hxClasses["ui.MLogoutForm"] = ui_MLogoutForm;
ui_MLogoutForm.__name__ = true;
ui_MLogoutForm.__interfaces__ = [mithril_Mithril];
ui_MLogoutForm.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		if(this.clientUser == null) {
			return m.m("div","clientUser == null");
		}
		var userData = this.clientUser.userData;
		var homeroom = model_ContentTreeFilters.filterHomeRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree));
		return m.m("form",[m.m("div",""),m.m("h3",{ style : { color : homeroom.textcolor}},"Vlkommen, " + userData.firstname + " " + userData.lastname + "!" + " access:" + userData.access + " active domain:" + this.clientUser.userConfig.domain),m.m("button[type=button]",{ onclick : function(e) {
			model_UserModel.instance.signOut();
			return;
		}},"Logout")]);
	}
	,setUser: function(u) {
		this.clientUser = u;
		return this;
	}
	,__class__: ui_MLogoutForm
};
var ui_UIHeader = function() {
	this.logoutform = null;
	this.loginform = null;
	this.loginform = new ui_MLoginForm();
	this.logoutform = new ui_MLogoutForm();
	this.loginform.submitCallback = function(email,password) {
		model_UserModel.instance.signIn(email,password);
		return;
	};
};
$hxClasses["ui.UIHeader"] = ui_UIHeader;
ui_UIHeader.__name__ = true;
ui_UIHeader.__interfaces__ = [mithril_Mithril];
ui_UIHeader.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var homeroom = model_ContentTreeFilters.filterHomeRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree));
		var element = ($_=window.document,$bind($_,$_.querySelector));
		var elHeader = element("header");
		elHeader.style.backgroundColor = homeroom.color;
		var userView;
		var _g = model_UserModel.instance.currentUser;
		switch(_g._hx_index) {
		case 0:
			userView = this.loginform.view();
			break;
		case 1:
			userView = m.m("h2",{ style : { textAlign : "right", paddingRight : "1em"}},"Loading user data...");
			break;
		case 2:
			var d = _g.d;
			userView = this.logoutform.setUser(d).view();
			break;
		}
		return [m.m("h1",{ style : { color : homeroom.textcolor}},"" + homeroom.title),userView];
	}
	,__class__: ui_UIHeader
};
var ui_TestUI = function() {
};
$hxClasses["ui.TestUI"] = ui_TestUI;
ui_TestUI.__name__ = true;
ui_TestUI.__interfaces__ = [mithril_Mithril];
ui_TestUI.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [m.m("button",{ onclick : function(e) {
			return model_ApiCalls.getAuthRequest("/api/userdata").then(function(data) {
				model_ErrorsAndLogs.addLog(JSON.stringify(data));
				console.log("src/ui/ClientUI.hx:227:","userData result: " + JSON.stringify(data));
				return;
			})["catch"](function(error) {
				console.log("src/ui/ClientUI.hx:229:","userData error: " + error);
				model_ErrorsAndLogs.addError(error);
				return;
			});
		}},"Test /api/userData "),m.m("button",{ onclick : function(e1) {
			return model_ApiCalls.getAuthRequest("/api/userconfig").then(function(data1) {
				console.log("src/ui/ClientUI.hx:238:","userconfig result: " + JSON.stringify(data1));
				model_ErrorsAndLogs.addLog(JSON.stringify(data1));
				return;
			})["catch"](function(error1) {
				console.log("src/ui/ClientUI.hx:241:","userconfig error: " + error1);
				model_ErrorsAndLogs.addError(error1);
				return;
			});
		}},"Test /api/userConfig "),m.m("button",{ onclick : function(e2) {
			return model_ApiCalls.getRequest("/api/content-tree").then(function(data2) {
				console.log("src/ui/ClientUI.hx:249:","content-tree result: " + JSON.stringify(data2));
				model_ErrorsAndLogs.addLog(JSON.stringify(data2));
				return;
			})["catch"](function(error2) {
				console.log("src/ui/ClientUI.hx:252:","content-tree error: " + error2);
				model_ErrorsAndLogs.addError(error2);
				return;
			});
		}},"Test /api/content-treeB ")];
	}
	,__class__: ui_TestUI
};
var ui_content_ContentItemView = function() {
};
$hxClasses["ui.content.ContentItemView"] = ui_content_ContentItemView;
ui_content_ContentItemView.__name__ = true;
ui_content_ContentItemView.__interfaces__ = [mithril_Mithril];
ui_content_ContentItemView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var _g = model_ContentItemModel.instance.contentItem;
		switch(_g._hx_index) {
		case 0:
			var ref = _g.ref;
			var item = model_ContentTreeFilters.filterRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree),ref.roomId);
			return new ui_content_RoomView(item).view();
		case 1:
			var ref1 = _g.ref;
			var item1 = model_ContentTreeFilters.filterShelf(model_ContentTreeFilters.filterRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree),ref1.roomId),ref1.shelfId);
			return new ui_content_ShelfView(item1).view();
		case 2:
			var ref2 = _g.ref;
			var item2 = model_ContentTreeFilters.filterBook(model_ContentTreeFilters.filterShelf(model_ContentTreeFilters.filterRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree),ref2.roomId),ref2.shelfId),ref2.bookId);
			return new ui_content_BookView(item2).view();
		case 3:
			var ref3 = _g.ref;
			var item3 = model_ContentTreeFilters.filterChapter(model_ContentTreeFilters.filterBook(model_ContentTreeFilters.filterShelf(model_ContentTreeFilters.filterRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree),ref3.roomId),ref3.shelfId),ref3.bookId),ref3.chapterId);
			return new ui_content_ChapterView(item3).view();
		case 4:
			var ref4 = _g.ref;
			var item4 = model_ContentTreeFilters.filterSubchapter(model_ContentTreeFilters.filterChapter(model_ContentTreeFilters.filterBook(model_ContentTreeFilters.filterShelf(model_ContentTreeFilters.filterRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree),ref4.roomId),ref4.shelfId),ref4.bookId),ref4.chapterId),ref4.shelfId);
			return new ui_content_ChapterView(item4).view();
		case 5:
			var ct = _$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree);
			var homeRoom = model_ContentTreeFilters.filterHomeRoom(_$Client_DataMode_$Impl_$.getData(model_ContentTreeModel.instance.contentTree));
			return new ui_content_RoomView(homeRoom).view();
		case 6:
			return m.m("h1","BlaBla");
		case 7:
			return m.m("h1","Loading content");
		}
	}
	,__class__: ui_content_ContentItemView
};
var ui_content_RoomView = function(item) {
	this.item = item;
};
$hxClasses["ui.content.RoomView"] = ui_content_RoomView;
ui_content_RoomView.__name__ = true;
ui_content_RoomView.__interfaces__ = [mithril_Mithril];
ui_content_RoomView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("h1","Room"),m.m("div","" + Std.string(this.item))]);
	}
	,__class__: ui_content_RoomView
};
var ui_content_ShelfView = function(item) {
	this.item = item;
};
$hxClasses["ui.content.ShelfView"] = ui_content_ShelfView;
ui_content_ShelfView.__name__ = true;
ui_content_ShelfView.__interfaces__ = [mithril_Mithril];
ui_content_ShelfView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("h1","Shelf"),m.m("div","" + Std.string(this.item))]);
	}
	,__class__: ui_content_ShelfView
};
var ui_content_BookView = function(item) {
	this.item = item;
};
$hxClasses["ui.content.BookView"] = ui_content_BookView;
ui_content_BookView.__name__ = true;
ui_content_BookView.__interfaces__ = [mithril_Mithril];
ui_content_BookView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("h1","Book"),m.m("div","" + Std.string(this.item))]);
	}
	,__class__: ui_content_BookView
};
var ui_content_ChapterView = function(item) {
	this.item = item;
};
$hxClasses["ui.content.ChapterView"] = ui_content_ChapterView;
ui_content_ChapterView.__name__ = true;
ui_content_ChapterView.__interfaces__ = [mithril_Mithril];
ui_content_ChapterView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("h1","Chapter"),m.m("div","" + Std.string(this.item))]);
	}
	,__class__: ui_content_ChapterView
};
var ui_content_SubchapterView = function(item) {
	this.item = item;
};
$hxClasses["ui.content.SubchapterView"] = ui_content_SubchapterView;
ui_content_SubchapterView.__name__ = true;
ui_content_SubchapterView.__interfaces__ = [mithril_Mithril];
ui_content_SubchapterView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("h1","Subchapter"),m.m("div","" + Std.string(this.item))]);
	}
	,__class__: ui_content_SubchapterView
};
var ui_content_ContentTreeView = function(filter) {
	this.filter = filter;
};
$hxClasses["ui.content.ContentTreeView"] = ui_content_ContentTreeView;
ui_content_ContentTreeView.__name__ = true;
ui_content_ContentTreeView.__interfaces__ = [mithril_Mithril];
ui_content_ContentTreeView.parsePath = function(p) {
	var segments = p.split("/");
	return { treeId : segments == null ? null : 0 > segments.length - 1 ? null : segments[0], roomId : segments == null ? null : 1 > segments.length - 1 ? null : segments[1], shelfId : segments == null ? null : 2 > segments.length - 1 ? null : segments[2], bookId : segments == null ? null : 3 > segments.length - 1 ? null : segments[3], chapterId : segments == null ? null : 4 > segments.length - 1 ? null : segments[4], subchapterId : segments == null ? null : 5 > segments.length - 1 ? null : segments[5]};
};
ui_content_ContentTreeView.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var _g = model_ContentTreeModel.instance.contentTree;
		switch(_g._hx_index) {
		case 0:
			return m.m("h1","Nil");
		case 1:
			return m.m("h1","Loading");
		case 2:
			var ct = _g.d;
			var path = ct.id;
			return m.m("details[open]",[m.m("summary","ContentTree " + ct.id)].concat(ct.rooms.map(function(child) {
				return new ui_content_UIRoom(child,path,_gthis.filter).view();
			})));
		}
	}
	,__class__: ui_content_ContentTreeView
};
var ui_content_UIRoom = function(item,parentPath,filter) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
	this.filter = filter;
};
$hxClasses["ui.content.UIRoom"] = ui_content_UIRoom;
ui_content_UIRoom.__name__ = true;
ui_content_UIRoom.__interfaces__ = [mithril_Mithril];
ui_content_UIRoom.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var showItem = this.filter != null && this.filter.filterRooms.indexOf(this.item.id) != -1;
		var cssClass = showItem ? ".open" : ".protected";
		var children = this.item.shelves != null ? this.item.shelves : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["room",objPath.treeId,objPath.roomId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Room:" + this.item.id + ":" + itemPath);
		return m.m("details[open]" + cssClass,[m.m("summary",[anchor])].concat(children.map(function(child) {
			return new ui_content_UIShelf(child,_gthis.path,_gthis.filter).view();
		})));
	}
	,__class__: ui_content_UIRoom
};
var ui_content_UIShelf = function(item,parentPath,filter) {
	this.item = item;
	this.path = parentPath + "/" + item.id;
	this.filter = filter;
};
$hxClasses["ui.content.UIShelf"] = ui_content_UIShelf;
ui_content_UIShelf.__name__ = true;
ui_content_UIShelf.__interfaces__ = [mithril_Mithril];
ui_content_UIShelf.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var showItem = this.filter != null && this.filter.filterAccess >= this.item.access;
		var cssClass = showItem ? ".open" : ".protected";
		var books = this.item.books != null ? this.item.books : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["shelf",objPath.treeId,objPath.roomId,objPath.shelfId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Shelf:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + cssClass,[m.m("summary",[anchor])].concat(books.map(function(child) {
			return new ui_content_UIBook(child,_gthis.path,_gthis.filter).view();
		})));
	}
	,__class__: ui_content_UIShelf
};
var ui_content_UIBook = function(item,parentPath,filter) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
	this.filter = filter;
};
$hxClasses["ui.content.UIBook"] = ui_content_UIBook;
ui_content_UIBook.__name__ = true;
ui_content_UIBook.__interfaces__ = [mithril_Mithril];
ui_content_UIBook.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var showItem = this.filter != null && this.filter.filterAccess >= this.item.access;
		var cssClass = showItem ? ".open" : ".protected";
		var chapters = this.item.chapters != null ? this.item.chapters : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["book",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Book:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + cssClass,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child,_gthis.path,_gthis.filter).view();
		})));
	}
	,__class__: ui_content_UIBook
};
var ui_content_UIChapter = function(item,parentPath,filter) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
	this.filter = filter;
};
$hxClasses["ui.content.UIChapter"] = ui_content_UIChapter;
ui_content_UIChapter.__name__ = true;
ui_content_UIChapter.__interfaces__ = [mithril_Mithril];
ui_content_UIChapter.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var showItem = this.filter != null && this.filter.filterAccess >= this.item.access;
		var cssClass = showItem ? ".open" : ".protected";
		var chapters = this.item.chapters != null ? this.item.chapters : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["chapter",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId,objPath.chapterId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Chapter:" + this.item.title + ":" + itemPath);
		return m.m("details[open]" + cssClass,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UISubchapter(child,_gthis.path,_gthis.filter).view();
		})));
	}
	,__class__: ui_content_UIChapter
};
var ui_content_UISubchapter = function(item,parentPath,filter) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
	this.filter = filter;
};
$hxClasses["ui.content.UISubchapter"] = ui_content_UISubchapter;
ui_content_UISubchapter.__name__ = true;
ui_content_UISubchapter.__interfaces__ = [mithril_Mithril];
ui_content_UISubchapter.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var showItem = this.filter != null && this.filter.filterAccess >= this.item.access;
		var cssClass = showItem ? ".open" : ".protected";
		var chapters = this.item.chapters != null ? this.item.chapters : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["subchapter",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId,objPath.chapterId,objPath.subchapterId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Subhapter:" + this.item.title + ":" + itemPath);
		return m.m("details[open]" + cssClass,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child,_gthis.path,_gthis.filter).view();
		})));
	}
	,__class__: ui_content_UISubchapter
};
var utils_Profile = function() {
	this.init();
};
$hxClasses["utils.Profile"] = utils_Profile;
utils_Profile.__name__ = true;
utils_Profile.prototype = {
	init: function() {
		this.starttime = new Date().getTime();
	}
	,ms: function() {
		return new Date().getTime() - this.starttime;
	}
	,msString: function() {
		return " (ms:" + this.ms() + ")";
	}
	,__class__: utils_Profile
};
var utils__$UserEmail_UserEmail_$Impl_$ = {};
$hxClasses["utils._UserEmail.UserEmail_Impl_"] = utils__$UserEmail_UserEmail_$Impl_$;
utils__$UserEmail_UserEmail_$Impl_$.__name__ = true;
utils__$UserEmail_UserEmail_$Impl_$.isValid = function(address) {
	return utils__$UserEmail_UserEmail_$Impl_$.ereg.match(address);
};
utils__$UserEmail_UserEmail_$Impl_$.makePiped = function(email) {
	return StringTools.replace(StringTools.replace(email,"@","||"),".","|");
};
utils__$UserEmail_UserEmail_$Impl_$.toPiped = function(this1) {
	return utils__$UserEmail_UserEmail_$Impl_$.makePiped(this1);
};
var utils__$UserPassword_UserPassword_$Impl_$ = {};
$hxClasses["utils._UserPassword.UserPassword_Impl_"] = utils__$UserPassword_UserPassword_$Impl_$;
utils__$UserPassword_UserPassword_$Impl_$.__name__ = true;
utils__$UserPassword_UserPassword_$Impl_$.isValid = function(str) {
	return str.length > 3;
};
function $getIterator(o) { if( o instanceof Array ) return HxOverrides.iter(o); else return o.iterator(); }
var $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$hxClasses["Math"] = Math;
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = true;
$hxClasses["Array"] = Array;
Array.__name__ = true;
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = ["Date"];
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
var __map_reserved = {};
Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{ get : function() {
	return String(this.val);
}});
try {
var __varName = window.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName);
} catch(_) {}
try {
GLOBAL.m = require("mithril");
var __varName1 = GLOBAL.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName1);
} catch(_) {}
DateTools.DAY_SHORT_NAMES = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
DateTools.DAY_NAMES = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
DateTools.MONTH_SHORT_NAMES = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
DateTools.MONTH_NAMES = ["January","February","March","April","May","June","July","August","September","October","November","December"];
dataclass_Converter.directConversions = ["Int","Bool","Float","String"];
dataclass_Converter.enumCache = new haxe_ds_StringMap();
dataclass_Converter.classCache = new haxe_ds_StringMap();
dataclass_JsonConverter.current = new dataclass_JsonConverter();
js_Boot.__toStr = ({ }).toString;
model_ContentItemModel.instance = new model_ContentItemModel();
model_ContentTreeModel.instance = new model_ContentTreeModel();
model_ContentTree.__meta__ = { obj : { dataClassRtti : [{ id : "String", rooms : "Array<DataClass<model.Room>>"}]}};
model_ContentTree.uid = 1;
model_Room.__meta__ = { obj : { dataClassRtti : [{ id : "String", shelves : "Array<DataClass<model.Shelf>>", title : "String", color : "String", textcolor : "String"}]}};
model_Shelf.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", info : "String", books : "Array<DataClass<model.Book>>"}]}};
model_Book.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "Enum<model.Booktype>", info : "String", chapters : "Array<DataClass<model.Chapter>>"}]}};
model_Chapter.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "Enum<model.Chaptertype>", info : "String", text : "String", chapters : "Array<DataClass<model.Chapter>>"}]}};
model_ErrorsAndLogs.logs = [];
model_ErrorsAndLogs.errors = [];
model_Routes.instance = new model_Routes();
model_UserModel.instance = new model_UserModel();
model_CurrentUser.__meta__ = { obj : { dataClassRtti : [{ userData : "DataClass<model.UserData>", userConfig : "DataClass<model.UserConfig>"}]}};
model_UserData.__meta__ = { obj : { dataClassRtti : [{ firstname : "String", lastname : "String", email : "String", domains : "Array<String>", access : "Int"}]}};
model_UserConfig.__meta__ = { obj : { dataClassRtti : [{ domain : "String"}]}};
ui_ClientUI.instance = new ui_ClientUI();
utils_Profile.instance = new utils_Profile();
utils__$UserEmail_UserEmail_$Impl_$.ereg = new EReg("^[\\w-\\.]{2,}@[\\w-\\.]{2,}\\.[a-z]{2,6}$","i");
Client.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
