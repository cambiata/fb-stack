// Generated by Haxe 4.0.0-preview.4+1e3e5e016
(function ($global) { "use strict";
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = {},$_;
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var Client = function() {
	data_FirebaseModel.instance.init();
	Promise.all([data_UserLoader.instance.startup(),data_ContentLoader.instance.startup()]).then(function(val) {
		console.log("src/Client.hx:24:","ALL STARTED");
		data_ContentLoader.instance.loadRealtimeUpdate();
		return;
	})["catch"](function(e) {
		console.log("src/Client.hx:32:","Error:" + e);
		return;
	});
	ui_ClientUI.instance.init();
	data_Routes.instance.init();
};
$hxClasses["Client"] = Client;
Client.__name__ = ["Client"];
Client.main = function() {
	new Client();
};
Client.prototype = {
	__class__: Client
};
var DataClass = function() { };
$hxClasses["DataClass"] = DataClass;
DataClass.__name__ = ["DataClass"];
var DateTools = function() { };
$hxClasses["DateTools"] = DateTools;
DateTools.__name__ = ["DateTools"];
DateTools.__format_get = function(d,e) {
	switch(e) {
	case "%":
		return "%";
	case "A":
		return DateTools.DAY_NAMES[d.getDay()];
	case "B":
		return DateTools.MONTH_NAMES[d.getMonth()];
	case "C":
		return StringTools.lpad(Std.string(d.getFullYear() / 100 | 0),"0",2);
	case "D":
		return DateTools.__format(d,"%m/%d/%y");
	case "F":
		return DateTools.__format(d,"%Y-%m-%d");
	case "I":case "l":
		var hour = d.getHours() % 12;
		return StringTools.lpad(Std.string(hour == 0 ? 12 : hour),e == "I" ? "0" : " ",2);
	case "M":
		return StringTools.lpad(Std.string(d.getMinutes()),"0",2);
	case "R":
		return DateTools.__format(d,"%H:%M");
	case "S":
		return StringTools.lpad(Std.string(d.getSeconds()),"0",2);
	case "T":
		return DateTools.__format(d,"%H:%M:%S");
	case "Y":
		return Std.string(d.getFullYear());
	case "a":
		return DateTools.DAY_SHORT_NAMES[d.getDay()];
	case "b":case "h":
		return DateTools.MONTH_SHORT_NAMES[d.getMonth()];
	case "d":
		return StringTools.lpad(Std.string(d.getDate()),"0",2);
	case "e":
		return Std.string(d.getDate());
	case "H":case "k":
		return StringTools.lpad(Std.string(d.getHours()),e == "H" ? "0" : " ",2);
	case "m":
		return StringTools.lpad(Std.string(d.getMonth() + 1),"0",2);
	case "n":
		return "\n";
	case "p":
		if(d.getHours() > 11) {
			return "PM";
		} else {
			return "AM";
		}
		break;
	case "r":
		return DateTools.__format(d,"%I:%M:%S %p");
	case "s":
		return Std.string(d.getTime() / 1000 | 0);
	case "t":
		return "\t";
	case "u":
		var t = d.getDay();
		if(t == 0) {
			return "7";
		} else if(t == null) {
			return "null";
		} else {
			return "" + t;
		}
		break;
	case "w":
		return Std.string(d.getDay());
	case "y":
		return StringTools.lpad(Std.string(d.getFullYear() % 100),"0",2);
	default:
		throw new js__$Boot_HaxeError("Date.format %" + e + "- not implemented yet.");
	}
};
DateTools.__format = function(d,f) {
	var r_b = "";
	var p = 0;
	while(true) {
		var np = f.indexOf("%",p);
		if(np < 0) {
			break;
		}
		var len = np - p;
		r_b += len == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len);
		r_b += Std.string(DateTools.__format_get(d,HxOverrides.substr(f,np + 1,1)));
		p = np + 2;
	}
	var len1 = f.length - p;
	r_b += len1 == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len1);
	return r_b;
};
DateTools.format = function(d,f) {
	return DateTools.__format(d,f);
};
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = ["EReg"];
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = ["HxOverrides"];
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Lambda = function() { };
$hxClasses["Lambda"] = Lambda;
Lambda.__name__ = ["Lambda"];
Lambda.has = function(it,elt) {
	var x = $getIterator(it);
	while(x.hasNext()) if(x.next() == elt) {
		return true;
	}
	return false;
};
Lambda.iter = function(it,f) {
	var x = $getIterator(it);
	while(x.hasNext()) f(x.next());
};
Math.__name__ = ["Math"];
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = ["Reflect"];
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		return null;
	}
};
Reflect.getProperty = function(o,field) {
	var tmp;
	if(o == null) {
		return null;
	} else {
		var tmp1;
		if(o.__properties__) {
			tmp = o.__properties__["get_" + field];
			tmp1 = tmp;
		} else {
			tmp1 = false;
		}
		if(tmp1) {
			return o[tmp]();
		} else {
			return o[field];
		}
	}
};
Reflect.setProperty = function(o,field,value) {
	var tmp;
	var tmp1;
	if(o.__properties__) {
		tmp = o.__properties__["set_" + field];
		tmp1 = tmp;
	} else {
		tmp1 = false;
	}
	if(tmp1) {
		o[tmp](value);
	} else {
		o[field] = value;
	}
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = ["Std"];
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) {
		v = parseInt(x);
	}
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = ["StringTools"];
StringTools.startsWith = function(s,start) {
	if(s.length >= start.length) {
		return HxOverrides.substr(s,0,start.length) == start;
	} else {
		return false;
	}
};
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	if(slen >= elen) {
		return HxOverrides.substr(s,slen - elen,elen) == end;
	} else {
		return false;
	}
};
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,r,l - r);
	} else {
		return s;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
StringTools.lpad = function(s,c,l) {
	if(c.length <= 0) {
		return s;
	}
	while(s.length < l) s = c + s;
	return s;
};
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = ["Type"];
Type.getClassName = function(c) {
	var a = c.__name__;
	if(a == null) {
		return null;
	}
	return a.join(".");
};
Type.createInstance = function(cl,args) {
	return new (Function.prototype.bind.apply(cl,[null].concat(args)));
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw new js__$Boot_HaxeError("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw new js__$Boot_HaxeError("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw new js__$Boot_HaxeError("Constructor " + constr + " does not need parameters");
	}
	return f;
};
var data_ApiCalls = function() { };
$hxClasses["data.ApiCalls"] = data_ApiCalls;
data_ApiCalls.__name__ = ["data","ApiCalls"];
data_ApiCalls.getAuthRequest = function(url) {
	return data_ApiCalls.getFBUserToken().then(function(token) {
		var request = { method : "get", url : url, headers : { authorization : "Bearer " + token}};
		data_ErrorsAndLogs.addLog("AuthRequest: " + url);
		return m.request(request);
	});
};
data_ApiCalls.getRequest = function(url) {
	data_ErrorsAndLogs.addLog("Request: " + url);
	return m.request({ method : "get", url : url});
};
data_ApiCalls.getFBCurrentUser = function() {
	return firebase.auth().currentUser;
};
data_ApiCalls.getFBUserToken = function() {
	if(data_ApiCalls.getFBCurrentUser() != null) {
		return data_ApiCalls.getFBCurrentUser().getIdToken();
	} else {
		return new Promise(function(res,rej) {
			rej("Firebase.auth().currentUser == null");
			return;
		});
	}
};
var data_UserData = function(data1) {
	this.access = 1;
	this.domains = ["kak"];
	this.set_firstname(data1.firstname);
	this.set_lastname(data1.lastname);
	this.set_email(data1.email);
	if(Object.prototype.hasOwnProperty.call(data1,"domains")) {
		this.set_domains(data1.domains);
	}
	if(Object.prototype.hasOwnProperty.call(data1,"access")) {
		this.set_access(data1.access);
	}
};
$hxClasses["data.UserData"] = data_UserData;
data_UserData.__name__ = ["data","UserData"];
data_UserData.__interfaces__ = [DataClass];
data_UserData.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"firstname")) {
		output.push("firstname");
	} else if(data1.firstname == null) {
		output.push("firstname");
	}
	if(!Object.prototype.hasOwnProperty.call(data1,"lastname")) {
		output.push("lastname");
	} else if(data1.lastname == null) {
		output.push("lastname");
	}
	if(!Object.prototype.hasOwnProperty.call(data1,"email")) {
		output.push("email");
	} else if(data1.email == null) {
		output.push("email");
	}
	return output;
};
data_UserData.prototype = {
	set_firstname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.firstname.");
		}
		return this.firstname = v;
	}
	,set_lastname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.lastname.");
		}
		return this.lastname = v;
	}
	,set_email: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.email.");
		}
		return this.email = v;
	}
	,set_domains: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.domains.");
		}
		return this.domains = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.access.");
		}
		return this.access = v;
	}
	,__class__: data_UserData
	,__properties__: {set_access:"set_access",set_domains:"set_domains",set_email:"set_email",set_lastname:"set_lastname",set_firstname:"set_firstname"}
};
var data_UserConfig = function(data1) {
	this.set_domain(data1.domain);
};
$hxClasses["data.UserConfig"] = data_UserConfig;
data_UserConfig.__name__ = ["data","UserConfig"];
data_UserConfig.__interfaces__ = [DataClass];
data_UserConfig.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"domain")) {
		output.push("domain");
	} else if(data1.domain == null) {
		output.push("domain");
	}
	return output;
};
data_UserConfig.prototype = {
	set_domain: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserConfig.domain.");
		}
		return this.domain = v;
	}
	,__class__: data_UserConfig
	,__properties__: {set_domain:"set_domain"}
};
var data_ClientUser = function(data1) {
	this.set_userData(data1.userData);
	this.set_userConfig(data1.userConfig);
};
$hxClasses["data.ClientUser"] = data_ClientUser;
data_ClientUser.__name__ = ["data","ClientUser"];
data_ClientUser.__interfaces__ = [DataClass];
data_ClientUser.prototype = {
	set_userData: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ClientUser.userData.");
		}
		return this.userData = v;
	}
	,set_userConfig: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ClientUser.userConfig.");
		}
		return this.userConfig = v;
	}
	,__class__: data_ClientUser
	,__properties__: {set_userConfig:"set_userConfig",set_userData:"set_userData"}
};
var data_Content = function(data1) {
	this.rooms = [];
	this.path = "";
	this.set_id(data1.id);
	if(Object.prototype.hasOwnProperty.call(data1,"rooms")) {
		this.set_rooms(data1.rooms);
	}
};
$hxClasses["data.Content"] = data_Content;
data_Content.__name__ = ["data","Content"];
data_Content.__interfaces__ = [DataClass];
data_Content.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"id")) {
		output.push("id");
	} else if(data1.id == null) {
		output.push("id");
	}
	return output;
};
data_Content.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Content.id.");
		}
		return this.id = v;
	}
	,set_rooms: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Content.rooms.");
		}
		return this.rooms = v;
	}
	,__class__: data_Content
	,__properties__: {set_rooms:"set_rooms",set_id:"set_id"}
};
var data_Room = function(data1) {
	this.sort = 0;
	this.title = "defaultRoomTitle";
	this.shelves = [];
	this.id = "defaultRoomId";
	this.path = "";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"shelves")) {
			this.set_shelves(data1.shelves);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Room"] = data_Room;
data_Room.__name__ = ["data","Room"];
data_Room.__interfaces__ = [DataClass];
data_Room.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.id.");
		}
		return this.id = v;
	}
	,set_shelves: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.shelves.");
		}
		return this.shelves = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.title.");
		}
		return this.title = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Room
	,__properties__: {set_sort:"set_sort",set_title:"set_title",set_shelves:"set_shelves",set_id:"set_id"}
};
var data_Shelf = function(data1) {
	this.type = "content";
	this.sort = 0;
	this.books = [];
	this.info = "defaultShelfInfo";
	this.access = 0;
	this.title = "defaultShelfTitle";
	this.id = "defaultShelfId";
	this.path = "";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"books")) {
			this.set_books(data1.books);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"type")) {
			this.set_type(data1.type);
		}
	}
};
$hxClasses["data.Shelf"] = data_Shelf;
data_Shelf.__name__ = ["data","Shelf"];
data_Shelf.__interfaces__ = [DataClass];
data_Shelf.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.access.");
		}
		return this.access = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.info.");
		}
		return this.info = v;
	}
	,set_books: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.books.");
		}
		return this.books = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.sort.");
		}
		return this.sort = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.type.");
		}
		return this.type = v;
	}
	,__class__: data_Shelf
	,__properties__: {set_type:"set_type",set_sort:"set_sort",set_books:"set_books",set_info:"set_info",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_Book = function(data1) {
	this.sort = 0;
	this.chapters = [];
	this.info = "defaultBookInfo";
	this.type = "standard";
	this.access = 0;
	this.title = "defaultBookTitle";
	this.id = "defaultBookId";
	this.path = "";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"type")) {
			this.set_type(data1.type);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"chapters")) {
			this.set_chapters(data1.chapters);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Book"] = data_Book;
data_Book.__name__ = ["data","Book"];
data_Book.__interfaces__ = [DataClass];
data_Book.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.info.");
		}
		return this.info = v;
	}
	,set_chapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.chapters.");
		}
		return this.chapters = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Book
	,__properties__: {set_sort:"set_sort",set_chapters:"set_chapters",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_Chapter = function(data1) {
	this.sort = 0;
	this.subchapters = [];
	this.text = "defaultChapterText";
	this.info = "defaultChapterInfo";
	this.type = "article";
	this.access = 0;
	this.title = "defaultChapterTitle";
	this.id = "defaultChapterId";
	this.path = "";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"type")) {
			this.set_type(data1.type);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"text")) {
			this.set_text(data1.text);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"subchapters")) {
			this.set_subchapters(data1.subchapters);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Chapter"] = data_Chapter;
data_Chapter.__name__ = ["data","Chapter"];
data_Chapter.__interfaces__ = [DataClass];
data_Chapter.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.info.");
		}
		return this.info = v;
	}
	,set_text: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.text.");
		}
		return this.text = v;
	}
	,set_subchapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.subchapters.");
		}
		return this.subchapters = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Chapter
	,__properties__: {set_sort:"set_sort",set_subchapters:"set_subchapters",set_text:"set_text",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_ContentFilters = function() { };
$hxClasses["data.ContentFilters"] = data_ContentFilters;
data_ContentFilters.__name__ = ["data","ContentFilters"];
data_ContentFilters.sort = function(ct) {
	var a = ct.rooms;
	a.sort(function(a1,b) {
		return a1.sort - b.sort;
	});
	Lambda.iter(a,function(room) {
		var a2 = room.shelves;
		a2.sort(function(a3,b1) {
			return a3.sort - b1.sort;
		});
		Lambda.iter(a2,function(shelf) {
			var a4 = shelf.books;
			a4.sort(function(a5,b2) {
				return a5.sort - b2.sort;
			});
			return a4;
		});
		return;
	});
	return ct;
};
var data_ContentLoader = function() {
};
$hxClasses["data.ContentLoader"] = data_ContentLoader;
data_ContentLoader.__name__ = ["data","ContentLoader"];
data_ContentLoader.prototype = {
	load: function() {
		data_ApiCalls.getRequest("/api/content-tree").then(function(item) {
			data_ErrorsAndLogs.addErrors(item.errors);
			data_ContentModel.instance.set_content(dataclass_JsonConverter.fromJson(data_Content,item.data));
			data_ErrorsAndLogs.addLog("Content-tree loaded ");
			return null;
		})["catch"](function(error) {
			data_ErrorsAndLogs.addError("Content-tree error: " + error);
			return;
		});
	}
	,loadRealtimeUpdate: function() {
		firebase.database().ref("content-tree").on("value",function(snap,str) {
			try {
				console.log("src/data/ContentLoader.hx:33:","Realtime content loaded!");
				return data_ContentModel.instance.set_content(dataclass_JsonConverter.fromJson(data_Content,snap.val()));
			} catch( e ) {
				console.log("src/data/ContentLoader.hx:36:","Could not insantiate content from loaded Realtime data " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
				return null;
			}
		});
	}
	,startup: function() {
		data_ContentModel.instance.init();
		return data_ApiCalls.getRequest("/api/content-tree").then(function(item) {
			data_ContentModel.instance.set_content(dataclass_JsonConverter.fromJson(data_Content,item.data));
			return Promise.resolve(true);
		});
	}
	,__class__: data_ContentLoader
};
var data_ErrorsAndLogs = function() { };
$hxClasses["data.ErrorsAndLogs"] = data_ErrorsAndLogs;
data_ErrorsAndLogs.__name__ = ["data","ErrorsAndLogs"];
data_ErrorsAndLogs.addLog = function(log) {
	data_ErrorsAndLogs.logs.unshift(log);
	var el = window.document.createElement("div");
	el.textContent = log;
	data_ErrorsAndLogs.element("#logs").appendChild(el);
};
data_ErrorsAndLogs.addErrors = function(err) {
	Lambda.iter(err,function(e) {
		data_ErrorsAndLogs.addError(e);
		return;
	});
};
data_ErrorsAndLogs.addError = function(e) {
	data_ErrorsAndLogs.errors.unshift(e);
	var el = window.document.createElement("div");
	el.textContent = e;
	data_ErrorsAndLogs.element("#errors").appendChild(el);
};
var data_ContentModel = function() {
	data_ErrorsAndLogs.addLog("new content");
};
$hxClasses["data.ContentModel"] = data_ContentModel;
data_ContentModel.__name__ = ["data","ContentModel"];
data_ContentModel.prototype = {
	set_content: function(u) {
		var updatePaths = function(tree) {
			tree.path = "";
			Lambda.iter(tree.rooms,function(room) {
				room.path = tree.path + "/" + room.id;
				Lambda.iter(room.shelves,function(shelf) {
					shelf.path = room.path + "/" + shelf.id;
					Lambda.iter(shelf.books,function(book) {
						book.path = shelf.path + "/" + book.id;
						Lambda.iter(book.chapters,function(chapter) {
							chapter.path = book.path + "/" + chapter.id;
							Lambda.iter(chapter.subchapters,function(sub) {
								return sub.path = chapter.path + "/" + sub.id;
							});
							return;
						});
						return;
					});
					return;
				});
				return;
			});
		};
		this.content = u;
		data_ErrorsAndLogs.addLog("Content:" + Std.string(this.content));
		updatePaths(this.content);
		m.redraw();
		return u;
	}
	,init: function() {
		this.set_content(new data_Content({ id : "tree0", rooms : [new data_Room({ id : "room0", title : "TestRoom", shelves : [new data_Shelf({ id : "home", title : "Homeshelf Room0", type : "homepage", access : 0, books : []}),new data_Shelf({ id : "sh0", title : "Shelf01", access : 0, books : [new data_Book({ id : "book0", title : "Bok 0", access : 0, chapters : [new data_Chapter({ id : "chapter0", title : "Kapitel 1", access : 1, subchapters : [new data_Chapter({ id : "sub0", title : "Sub0", access : 0}),new data_Chapter({ id : "sub1", title : "Sub1", access : 0})]}),new data_Chapter({ id : "chapter1", title : "Kapitel 2", access : 0, subchapters : [new data_Chapter({ id : "sub0", title : "Sub0", access : 0}),new data_Chapter({ id : "sub1", title : "Sub1", access : 0}),new data_Chapter({ id : "sub2", title : "Sub2", access : 0})]}),new data_Chapter({ id : "chapter3", title : "Kapitel 3", access : 0, subchapters : []})]}),new data_Book({ id : "book1", title : "Bok 1", access : 1, chapters : [new data_Chapter({ id : "chapter0", title : "Kapitel 1", access : 1, subchapters : [new data_Chapter({ id : "sub0", title : "Sub0", access : 0}),new data_Chapter({ id : "sub1", title : "Sub1", access : 0})]})]})]}),new data_Shelf({ id : "sh1", title : "Shelf1", access : 1, books : []}),new data_Shelf({ id : "sh2", title : "Shelf2", access : 0, books : [new data_Book({ id : "book0", title : "Book 0", access : 0, chapters : [new data_Chapter({ id : "chapter0", title : "Chapter Access 0", access : 0, subchapters : []}),new data_Chapter({ id : "chapter1", title : "Chapter Access 1", access : 1, subchapters : []}),new data_Chapter({ id : "chapter2", title : "Chapter Access 2", access : 2, subchapters : []})]})]}),new data_Shelf({ id : "home", title : "Home shelf", type : "homepage", access : 999, books : [new data_Book({ id : "homebook0", title : "Home Book 0", access : 999, chapters : []}),new data_Book({ id : "homebook1", title : "Home Book 1", access : 999, chapters : []})]})]}),new data_Room({ id : "room1", title : "Room1", shelves : [new data_Shelf({ id : "home", title : "Homeshelf Room1", type : "homepage", access : 0, books : [new data_Book({ id : "b0", title : "Book0", access : 0, chapters : []}),new data_Book({ id : "b1", title : "Book1", access : 0, chapters : []})]}),new data_Shelf({ id : "sh0", title : "Shelf0 of Room1", access : 0, books : [new data_Book({ id : "b0", title : "Book0", access : 0, chapters : []}),new data_Book({ id : "b1", title : "Book1", access : 0, chapters : []})]})]})]}));
		console.log("src/data/ContentModel.hx:94:",JSON.stringify(dataclass_JsonConverter.toJson(this.content)));
	}
	,__class__: data_ContentModel
	,__properties__: {set_content:"set_content"}
};
var data_ContentitemLoader = function() {
};
$hxClasses["data.ContentitemLoader"] = data_ContentitemLoader;
data_ContentitemLoader.__name__ = ["data","ContentitemLoader"];
data_ContentitemLoader.prototype = {
	load: function(ids) {
		var idsParameter = ids.map(function(id) {
			return StringTools.trim(id);
		}).join(",");
		console.log("src/data/ContentitemLoader.hx:18:",idsParameter);
		data_ApiCalls.getRequest("/api/test/" + idsParameter).then(function(d) {
			console.log("src/data/ContentitemLoader.hx:22:",d);
			var a = d.items;
			console.log("src/data/ContentitemLoader.hx:24:",a);
			console.log("src/data/ContentitemLoader.hx:26:",a.map(function(item) {
				return { id : item.id, content : item.content};
			}));
			return null;
		})["catch"](function(e) {
			data_ErrorsAndLogs.addError(e);
			console.log("src/data/ContentitemLoader.hx:34:","ERror" + e);
			return;
		});
		return null;
	}
	,__class__: data_ContentitemLoader
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = ["haxe","IMap"];
var haxe_ds_StringMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = ["haxe","ds","StringMap"];
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,existsReserved: function(key) {
		if(this.rh == null) {
			return false;
		}
		return this.rh.hasOwnProperty("$" + key);
	}
	,keys: function() {
		return HxOverrides.iter(this.arrayKeys());
	}
	,arrayKeys: function() {
		var out = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) {
			out.push(key);
		}
		}
		if(this.rh != null) {
			for( var key in this.rh ) {
			if(key.charCodeAt(0) == 36) {
				out.push(key.substr(1));
			}
			}
		}
		return out;
	}
	,__class__: haxe_ds_StringMap
};
var data_FilterModel = function() {
};
$hxClasses["data.FilterModel"] = data_FilterModel;
data_FilterModel.__name__ = ["data","FilterModel"];
data_FilterModel.prototype = {
	setFilterContent: function(ref) {
		this.filterContent = ref;
		console.log("src/data/FilterModel.hx:17:",this.filterContent);
		m.redraw();
	}
	,getRoom: function() {
		var _gthis = this;
		try {
			return data_ContentModel.instance.content.rooms.filter(function(room) {
				return room.id == _gthis.filterContent.roomId;
			})[0];
		} catch( e ) {
			return data_ContentModel.instance.content.rooms[0];
		}
	}
	,getRoomHomeshelf: function() {
		try {
			return data_FilterTools.getShelvesOfType(this.getRoom().shelves,"homepage")[0];
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getRoomHomeShelf(): Cant not get home shelf of room with ref " + Std.string(this.filterContent));
			return null;
		}
	}
	,getRoomShelvesExceptHomeshelf: function() {
		try {
			return data_FilterTools.getShelvesExcludeType(this.getRoom().shelves,"homepage");
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getRoomShelvesExceptHomeshelf(): Cant not get shelves of room with ref " + Std.string(this.filterContent));
			return [];
		}
	}
	,getShelves: function() {
		var _gthis = this;
		try {
			var shelves = this.getRoomShelvesExceptHomeshelf();
			if(this.filterContent != null && this.filterContent.shelfId != null) {
				shelves = shelves.filter(function(shelf) {
					return shelf.id == _gthis.filterContent.shelfId;
				});
			}
			return shelves;
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getShelves(): Cant not get shelves of room with ref " + Std.string(this.filterContent));
			return [];
		}
	}
	,getShelf: function() {
		var _gthis = this;
		try {
			return this.getRoom().shelves.filter(function(shelf) {
				return shelf.id == _gthis.filterContent.shelfId;
			})[0];
		} catch( e ) {
			return null;
		}
	}
	,getBook: function() {
		var _gthis = this;
		try {
			return this.getShelf().books.filter(function(book) {
				return book.id == _gthis.filterContent.bookId;
			})[0];
		} catch( e ) {
			return null;
		}
	}
	,getChapters: function() {
		try {
			return this.getBook().chapters;
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getChapters(): Cant not get chapters of book with ref " + Std.string(this.filterContent));
			return null;
		}
	}
	,getChapter: function() {
		var _gthis = this;
		try {
			if(this.filterContent.chapterId != null) {
				return this.getChapters().filter(function(chapter) {
					return chapter.id == _gthis.filterContent.chapterId;
				})[0];
			} else {
				return this.getChapters()[0];
			}
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getChapter(): Cant not get chapters of book with ref" + Std.string(this.filterContent));
			return null;
		}
	}
	,getSubchapters: function() {
		try {
			return this.getChapter().subchapters;
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getSubchapters(): Cant not get subchapters of chapter with ref" + Std.string(this.filterContent));
			return null;
		}
	}
	,getSubchapter: function() {
		var _gthis = this;
		try {
			if(this.filterContent.subchapterId != null) {
				return this.getSubchapters().filter(function(sub) {
					return sub.id == _gthis.filterContent.subchapterId;
				})[0];
			} else {
				return this.getSubchapters()[0];
			}
		} catch( e ) {
			data_ErrorsAndLogs.addError("FilterModel.getSubchapter(): Cant not get subchapter of chapter with ref" + Std.string(this.filterContent));
			return null;
		}
	}
	,__class__: data_FilterModel
};
var data_FilterTools = function() { };
$hxClasses["data.FilterTools"] = data_FilterTools;
data_FilterTools.__name__ = ["data","FilterTools"];
data_FilterTools.getShelvesOfType = function(shelves,type) {
	return shelves.filter(function(shelf) {
		return shelf.type == type;
	});
};
data_FilterTools.getShelvesExcludeType = function(shelves,type) {
	return shelves.filter(function(shelf) {
		return shelf.type != type;
	});
};
var data_FirebaseModel = function() {
	this.app = null;
};
$hxClasses["data.FirebaseModel"] = data_FirebaseModel;
data_FirebaseModel.__name__ = ["data","FirebaseModel"];
data_FirebaseModel.prototype = {
	init: function() {
		this.app = firebase.initializeApp({ apiKey : "AIzaSyBGLErhUSfQHA4wOtkid206KVE-96QEN04", authDomain : "fb-stack.firebaseapp.com", databaseURL : "https://fb-stack.firebaseio.com", projectId : "fb-stack", storageBucket : "fb-stack.appspot.com", messagingSenderId : "665827748546"});
	}
	,__class__: data_FirebaseModel
};
var data_Routes = function() {
	this.homeHandler = { onmatch : function(args,path) {
		try {
			data_ErrorsAndLogs.addLog("RouteResolver:" + path + ": " + Std.string(args) + "");
			data_FilterModel.instance.setFilterContent(null);
		} catch( e ) {
			data_ErrorsAndLogs.addError("RouteResolver roomHandler Error: " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
		}
		return null;
	}, render : function(vnode) {
		return m.m("div","homeHandler");
	}};
	this.contentHandler = { onmatch : function(args1,path1) {
		try {
			data_ErrorsAndLogs.addLog("RouteResolver:" + path1 + ": " + Std.string(args1) + "");
			data_FilterModel.instance.setFilterContent(args1);
		} catch( e1 ) {
			data_ErrorsAndLogs.addError("RouteResolver roomHandler Error: " + Std.string((e1 instanceof js__$Boot_HaxeError) ? e1.val : e1));
		}
		return null;
	}, render : function(vnode1) {
		return m.m("div","homeHandler");
	}};
};
$hxClasses["data.Routes"] = data_Routes;
data_Routes.__name__ = ["data","Routes"];
data_Routes.prototype = {
	init: function() {
		var routes = { "/" : this.homeHandler, "/content/:roomId" : this.contentHandler, "/content/:roomId/:shelfId" : this.contentHandler, "/content/:roomId/:shelfId/:bookId" : this.contentHandler, "/content/:roomId/:shelfId/:bookId/:chapterId" : this.contentHandler, "/content/:roomId/:shelfId/:bookId/:chapterId/:subchapterId" : this.contentHandler};
		m.route(window.document.querySelector("#routes"),"/",routes);
	}
	,__class__: data_Routes
};
var data_UserLoader = function() {
};
$hxClasses["data.UserLoader"] = data_UserLoader;
data_UserLoader.__name__ = ["data","UserLoader"];
data_UserLoader.prototype = {
	load: function() {
		firebase.app().auth().onAuthStateChanged(function(user) {
			if(user != null) {
				data_ErrorsAndLogs.addLog("Browser session user found.");
				data_UserModel.instance.setLoadingUser();
				return data_ApiCalls.getAuthRequest("/api/userconfig").then(function(data1) {
					data_UserModel.instance.setLoadedUserFromData(data1);
					data_ErrorsAndLogs.addErrors(data1.errors);
					console.log("src/data/UserLoader.hx:23:","UserModelLoaded");
					return;
				})["catch"](function(error) {
					data_ErrorsAndLogs.addError("Could not load userconfig for browser session user");
					data_ErrorsAndLogs.addError(error);
					return;
				});
			} else {
				data_ErrorsAndLogs.addLog("No browser session user found.");
				data_UserModel.instance.setAnonymousUser();
				return null;
			}
		},function(error1) {
			data_ErrorsAndLogs.addLog("Error: " + Std.string(error1));
			data_UserModel.instance.setAnonymousUser();
			return;
		});
	}
	,loadRealtimeUpdate: function() {
		try {
			if(data_UserModel.instance.clientUser != null) {
				var userEmail = data_UserModel.instance.clientUser.userData.email;
				console.log("src/data/UserLoader.hx:43:",userEmail);
				var dbpath = "users/" + utils__$UserEmail_UserEmail_$Impl_$.toPiped(userEmail);
				console.log("src/data/UserLoader.hx:46:","dbpath: " + dbpath);
				firebase.database().ref(dbpath).on("value",function(snap,str) {
					var userCopy = data_UserModel.instance.clientUser;
					var data1 = snap.val();
					data1.email = userEmail;
					data_ErrorsAndLogs.addLog("UserModel UserData realtime update active");
					userCopy.set_userData(dataclass_JsonConverter.fromJson(data_UserData,data1));
					return data_UserModel.instance.set_clientUser(userCopy);
				});
				var dbpath1 = "user-config/" + utils__$UserEmail_UserEmail_$Impl_$.toPiped(userEmail);
				firebase.database().ref(dbpath1).on("value",function(snap1,str1) {
					data_ErrorsAndLogs.addLog("UserModel User Config realtime update active");
					var data2 = snap1.val();
					var userCopy1 = data_UserModel.instance.clientUser;
					userCopy1.set_userConfig(dataclass_JsonConverter.fromJson(data_UserConfig,data2));
					return data_UserModel.instance.set_clientUser(userCopy1);
				});
				return;
			} else {
				data_ErrorsAndLogs.addLog("Can not use Realtime data for anonymous user.");
				return;
			}
		} catch( e ) {
			data_ErrorsAndLogs.addError("initRealtimeDatabase error: " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
			return;
		}
	}
	,signIn: function(email,password) {
		this.validate(email,password).then(function(valid) {
			data_UserModel.instance.setLoadingUser();
			return firebase.auth().signInWithEmailAndPassword(email,password);
		}).then(function(user) {
			console.log("src/data/UserLoader.hx:83:","USER " + user);
			return null;
		})["catch"](function(error) {
			console.log("src/data/UserLoader.hx:87:","ERROR" + error);
			data_ErrorsAndLogs.addError("error:" + error);
			data_UserModel.instance.setAnonymousUser();
			return;
		});
	}
	,signOut: function() {
		firebase.auth().signOut();
	}
	,validate: function(email,password) {
		return new Promise(function(res,rej) {
			try {
				if(!utils__$UserEmail_UserEmail_$Impl_$.isValid(email)) {
					throw new js__$Boot_HaxeError("User email is not valid: " + email);
				}
				if(!utils__$UserPassword_UserPassword_$Impl_$.isValid(password)) {
					throw new js__$Boot_HaxeError("User password is not valid: " + password);
				}
				res(true);
			} catch( e ) {
				rej((e instanceof js__$Boot_HaxeError) ? e.val : e);
			}
			return;
		});
	}
	,getCurrentBrowserUser: function() {
		return new Promise(function(resolve,reject) {
			var unsubscribe = null;
			unsubscribe = firebase.app().auth().onAuthStateChanged(function(user) {
				unsubscribe();
				resolve(user);
				return;
			},reject);
			return unsubscribe;
		});
	}
	,setUserStateLoading: function() {
		data_UserModel.instance.setLoadingUser();
		return Promise.resolve(true);
	}
	,setupOnAuthChange: function() {
		firebase.app().auth().onAuthStateChanged(function(user) {
			if(user != null) {
				console.log("src/data/UserLoader.hx:131:","--- Browser session user found.");
				console.log("src/data/UserLoader.hx:133:","compare:" + user.email + " " + data_UserModel.instance.clientUser.userData.email);
				var address = user.email;
				if(!utils__$UserEmail_UserEmail_$Impl_$.isValid(address)) {
					throw new js__$Boot_HaxeError("EmailAddress \"" + address + "\" is invalid");
				}
				if(address.toLowerCase() == data_UserModel.instance.clientUser.userData.email) {
					return;
				}
				data_UserModel.instance.setLoadingUser();
				data_ApiCalls.getAuthRequest("/api/userconfig").then(function(data1) {
					data_UserModel.instance.setLoadedUserFromData(data1);
					console.log("src/data/UserLoader.hx:140:",data1.errors);
					console.log("src/data/UserLoader.hx:141:","--- UserModelLoaded");
					return;
				})["catch"](function(error) {
					console.log("src/data/UserLoader.hx:143:","--- Could not load userconfig for browser session user");
					console.log("src/data/UserLoader.hx:144:",error);
					return;
				});
				return;
			} else {
				console.log("src/data/UserLoader.hx:150:","--- No browser session user found.");
				data_UserModel.instance.setAnonymousUser();
				return;
			}
		},function(error1) {
			console.log("src/data/UserLoader.hx:155:","--- Error: " + Std.string(error1));
			data_UserModel.instance.setAnonymousUser();
			return;
		});
		return Promise.resolve(true);
	}
	,startup: function() {
		data_UserModel.instance.init();
		return data_UserLoader.instance.setUserStateLoading().then(function(val) {
			return data_UserLoader.instance.getCurrentBrowserUser();
		}).then(function(browserUser) {
			if(browserUser == null) {
				data_UserModel.instance.setAnonymousUser();
				return null;
			}
			console.log("src/data/UserLoader.hx:174:","Browser user found");
			return data_ApiCalls.getAuthRequest("/api/userconfig");
		}).then(function(dataResponse) {
			console.log("src/data/UserLoader.hx:178:",dataResponse);
			if(dataResponse == null) {
				return;
			}
			data_UserModel.instance.setLoadedUserFromData(dataResponse);
			return;
		}).then(function(val1) {
			return data_UserLoader.instance.setupOnAuthChange();
		}).then(function(val2) {
			console.log("src/data/UserLoader.hx:187:","finished User loading!");
			return Promise.resolve(true);
		});
	}
	,__class__: data_UserLoader
};
var data_UserModel = function() {
};
$hxClasses["data.UserModel"] = data_UserModel;
data_UserModel.__name__ = ["data","UserModel"];
data_UserModel.prototype = {
	set_clientUser: function(val) {
		this.clientUser = val;
		data_ErrorsAndLogs.addLog("ClientUser:" + Std.string(this.clientUser));
		m.redraw();
		return this.clientUser;
	}
	,init: function() {
		data_ErrorsAndLogs.addLog("UserModel.instance.init()");
		this.setAnonymousUser();
	}
	,setAnonymousUser: function() {
		this.clientUserState = data_ClientUserState.Anonymous;
		this.set_clientUser(new data_ClientUser(this.anonymousUser()));
	}
	,setLoadedUserFromData: function(data1) {
		try {
			this.set_clientUser(new data_ClientUser(data1));
			this.clientUserState = data_ClientUserState.User;
		} catch( e ) {
			data_ErrorsAndLogs.addError("Could not create ClientUser from data: " + Std.string((e instanceof js__$Boot_HaxeError) ? e.val : e));
			this.setAnonymousUser();
		}
	}
	,setLoadingUser: function() {
		this.clientUserState = data_ClientUserState.Loading;
		m.redraw();
	}
	,anonymousUser: function() {
		return { userData : { firstname : "Anonymous", lastname : "Anonymousson", email : "anon@anon.abc", domains : ["domain1"], access : 0}, userConfig : { domain : "domain1"}};
	}
	,__class__: data_UserModel
	,__properties__: {set_clientUser:"set_clientUser"}
};
var data_ClientUserState = $hxEnums["data.ClientUserState"] = { __ename__ : true, __constructs__ : ["Anonymous","Loading","User"]
	,Anonymous: {_hx_index:0,__enum__:"data.ClientUserState",toString:$estr}
	,Loading: {_hx_index:1,__enum__:"data.ClientUserState",toString:$estr}
	,User: {_hx_index:2,__enum__:"data.ClientUserState",toString:$estr}
};
var dataclass_CircularReferenceHandling = $hxEnums["dataclass.CircularReferenceHandling"] = { __ename__ : true, __constructs__ : ["ThrowException","SetToNull","TrackReferences"]
	,ThrowException: {_hx_index:0,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,SetToNull: {_hx_index:1,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,TrackReferences: {_hx_index:2,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
};
var dataclass_Rtti = function() { };
$hxClasses["dataclass.Rtti"] = dataclass_Rtti;
dataclass_Rtti.__name__ = ["dataclass","Rtti"];
dataclass_Rtti.rttiData = function(cls) {
	return haxe_rtti_Meta.getType(cls)["dataClassRtti"][0];
};
var dataclass_Converter = function(options) {
	this.useClassInfo = false;
	if(options == null) {
		options = { };
	}
	this.valueConverters = new haxe_ds_StringMap();
	var this1 = this.valueConverters;
	var value = new dataclass_DateValueConverter(Object.prototype.hasOwnProperty.call(options,"dateFormat") ? options.dateFormat : "%Y-%m-%dT%H:%M:%SZ");
	var _this = this1;
	if(__map_reserved["Date"] != null) {
		_this.setReserved("Date",value);
	} else {
		_this.h["Date"] = value;
	}
	this.circularReferences = Object.prototype.hasOwnProperty.call(options,"circularReferences") ? options.circularReferences : dataclass_CircularReferenceHandling.ThrowException;
};
$hxClasses["dataclass.Converter"] = dataclass_Converter;
dataclass_Converter.__name__ = ["dataclass","Converter"];
dataclass_Converter.enumType = function(name) {
	var _this = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.enumCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxEnums[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Enum not found: " + name);
	}
	var _this2 = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.classType = function(name) {
	var _this = dataclass_Converter.classCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.classCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxClasses[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Class not found: " + name);
	}
	var _this2 = dataclass_Converter.classCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.prototype = {
	toDataClass: function(cls,json) {
		var refCount = new haxe_ds_IntMap();
		var refAssign = new haxe_ds_IntMap();
		var output = this._toDataClass(cls,json,refCount,refAssign);
		this.assignReferences(refCount,refAssign);
		return output;
	}
	,assignReferences: function(refCount,refAssign) {
		var refId = refAssign.keys();
		while(refId.hasNext()) {
			var refId1 = refId.next();
			var _g = 0;
			var _g1 = refAssign.h[refId1];
			while(_g < _g1.length) {
				var data = _g1[_g];
				++_g;
				Reflect.setProperty(refCount.h[refId1],data.field,refCount.h[data.obj]);
			}
		}
	}
	,_toAnonymousStructure: function(cls,inputData,refCount,refAssign,currentId,toDataClass) {
		var rtti = dataclass_Rtti.rttiData(cls);
		var outputData = { };
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var _g = 0;
		var _g1 = Reflect.fields(rtti);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			if(Object.prototype.hasOwnProperty.call(inputData,field)) {
				var input = inputData[field];
				var data = rtti[field];
				if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && input != null && Object.prototype.hasOwnProperty.call(input,"$ref") && (StringTools.startsWith(data,"DataClass<") || StringTools.startsWith(data,"Interface<"))) {
					var refData = { obj : Reflect.field(input,"$ref"), field : field};
					if(!refAssign.h.hasOwnProperty(currentId)) {
						refAssign.h[currentId] = [refData];
					} else {
						refAssign.h[currentId].push(refData);
					}
				} else {
					outputData[field] = this.toField(rtti[field],input,refCount,refAssign,toDataClass);
				}
			}
		}
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && currentId > 0) {
			refCount.h[currentId] = outputData;
		}
		return outputData;
	}
	,_toDataClass: function(cls,json,refCount,refAssign) {
		var inputData = json;
		var currentId = 0;
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var output = Type.createInstance(cls,[this._toAnonymousStructure(cls,inputData,refCount,refAssign,currentId,true)]);
		if(currentId > 0 && this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences) {
			refCount.h[currentId] = output;
		}
		return output;
	}
	,toField: function(data,value,refCount,refAssign,toDataClass) {
		if(value == null) {
			if(StringTools.startsWith(data,"Option<")) {
				return haxe_ds_Option.None;
			} else {
				return value;
			}
		}
		var _this = this.valueConverters;
		if(__map_reserved[data] != null ? _this.existsReserved(data) : _this.h.hasOwnProperty(data)) {
			var _this1 = this.valueConverters;
			return (__map_reserved[data] != null ? _this1.getReserved(data) : _this1.h[data]).input(value);
		} else if(Lambda.has(dataclass_Converter.directConversions,data)) {
			return value;
		} else if(StringTools.startsWith(data,"Array<")) {
			var arrayType = data.substring(6,data.length - 1);
			var _g = [];
			var _g1 = 0;
			var _g2 = js_Boot.__cast(value , Array);
			while(_g1 < _g2.length) _g.push(this.toField(arrayType,_g2[_g1++],refCount,refAssign,toDataClass));
			return _g;
		} else if(StringTools.startsWith(data,"Enum<")) {
			return Type.createEnum(dataclass_Converter.enumType(data.substring(5,data.length - 1)),value);
		} else if(StringTools.startsWith(data,"DataClass<") || StringTools.startsWith(data,"Interface<")) {
			if(StringTools.startsWith(data,"Interface<") && !this.useClassInfo) {
				throw new js__$Boot_HaxeError("Cannot instantiate interface " + data.substring(10,data.length - 1) + ", please use TypedJsonConverter instead.");
			}
			var classT = this.useClassInfo ? dataclass_Converter.classType(Reflect.field(value,"$class")) : dataclass_Converter.classType(data.substring(10,data.length - 1));
			if(toDataClass) {
				return this._toDataClass(classT,value,refCount,refAssign);
			} else {
				return this._toAnonymousStructure(classT,value,refCount,refAssign,0,toDataClass);
			}
		} else if(StringTools.startsWith(data,"Option<")) {
			return haxe_ds_Option.Some(this.toField(data.substring(7,data.length - 1),value,refCount,refAssign,toDataClass));
		} else if(StringTools.startsWith(data,"StringMap<")) {
			var mapType = data.substring(10,data.length - 1);
			var output = new haxe_ds_StringMap();
			var object = value;
			var _g3 = 0;
			var _g11 = Reflect.fields(object);
			while(_g3 < _g11.length) {
				var key = _g11[_g3];
				++_g3;
				var value1 = this.toField(mapType,object[key],refCount,refAssign,toDataClass);
				if(__map_reserved[key] != null) {
					output.setReserved(key,value1);
				} else {
					output.h[key] = value1;
				}
			}
			return output;
		} else if(StringTools.startsWith(data,"IntMap<")) {
			var mapType1 = data.substring(7,data.length - 1);
			var output1 = new haxe_ds_IntMap();
			var object1 = value;
			var _g4 = 0;
			var _g12 = Reflect.fields(object1);
			while(_g4 < _g12.length) {
				var key1 = _g12[_g4];
				++_g4;
				var key2 = Std.parseInt(key1);
				var value2 = this.toField(mapType1,object1[key1],refCount,refAssign,toDataClass);
				output1.h[key2] = value2;
			}
			return output1;
		} else {
			throw new js__$Boot_HaxeError("Unsupported DataClass converter: " + data);
		}
	}
	,fromDataClass: function(cls) {
		return this._fromDataClass(cls,new haxe_ds_ObjectMap(),0);
	}
	,_fromDataClass: function(dataClass,refs,refcounter) {
		if(refs.h.__keys__[dataClass.__id__] != null) {
			switch(this.circularReferences._hx_index) {
			case 0:
				throw new js__$Boot_HaxeError("Converting circular DataClass structure.");
			case 1:
				return null;
			case 2:
				return { "$ref" : refs.h[dataClass.__id__]};
			}
		} else {
			refs.set(dataClass,++refcounter);
		}
		var outputData = this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences ? { "$id" : refcounter} : { };
		var rtti = dataclass_Rtti.rttiData(dataClass == null ? null : js_Boot.getClass(dataClass));
		var _g = 0;
		var _g1 = Reflect.fields(rtti);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			var input = Reflect.getProperty(dataClass,field);
			outputData[field] = this.convertToJsonField(rtti[field],input,refs,refcounter);
		}
		if(this.circularReferences == dataclass_CircularReferenceHandling.SetToNull) {
			refs.remove(dataClass);
		}
		if(this.useClassInfo) {
			outputData["$class"] = Type.getClassName(dataClass == null ? null : js_Boot.getClass(dataClass));
		}
		return outputData;
	}
	,convertToJsonField: function(data,value,refs,refcounter) {
		if(value == null) {
			return value;
		}
		var _this = this.valueConverters;
		if(__map_reserved[data] != null ? _this.existsReserved(data) : _this.h.hasOwnProperty(data)) {
			var _this1 = this.valueConverters;
			return (__map_reserved[data] != null ? _this1.getReserved(data) : _this1.h[data]).output(value);
		} else if(Lambda.has(dataclass_Converter.directConversions,data)) {
			return value;
		} else if(StringTools.startsWith(data,"Array<")) {
			var arrayType = data.substring(6,data.length - 1);
			var _g = [];
			var _g1 = 0;
			var _g2 = js_Boot.__cast(value , Array);
			while(_g1 < _g2.length) _g.push(this.convertToJsonField(arrayType,_g2[_g1++],refs,refcounter));
			return _g;
		} else if(StringTools.startsWith(data,"Enum<")) {
			return Std.string(value);
		} else if(StringTools.startsWith(data,"DataClass<") || StringTools.startsWith(data,"Interface<")) {
			if(StringTools.startsWith(data,"Interface<") && !this.useClassInfo) {
				throw new js__$Boot_HaxeError("Cannot convert interface " + data.substring(6,data.length - 1) + " to JSON, use TypedJsonConverter instead.");
			}
			return this._fromDataClass(value,refs,refcounter);
		} else if(StringTools.startsWith(data,"Option<")) {
			var option = value;
			switch(option._hx_index) {
			case 0:
				return option.v;
			case 1:
				return null;
			}
		} else if(StringTools.startsWith(data,"StringMap<")) {
			var mapType = data.substring(10,data.length - 1);
			var map = js_Boot.__cast(value , haxe_ds_StringMap);
			var output = { };
			var key = map.keys();
			while(key.hasNext()) {
				var key1 = key.next();
				output[key1] = this.convertToJsonField(mapType,__map_reserved[key1] != null ? map.getReserved(key1) : map.h[key1],refs,refcounter);
			}
			return output;
		} else if(StringTools.startsWith(data,"IntMap<")) {
			var mapType1 = data.substring(7,data.length - 1);
			var map1 = js_Boot.__cast(value , haxe_ds_IntMap);
			var output1 = { };
			var key2 = map1.keys();
			while(key2.hasNext()) {
				var key3 = key2.next();
				var value1 = this.convertToJsonField(mapType1,map1.h[key3],refs,refcounter);
				output1[key3 == null ? "null" : "" + key3] = value1;
			}
			return output1;
		} else {
			throw new js__$Boot_HaxeError("Unsupported DataClass converter: " + data);
		}
	}
	,__class__: dataclass_Converter
};
var dataclass_DateValueConverter = function(format) {
	this.format = format;
};
$hxClasses["dataclass.DateValueConverter"] = dataclass_DateValueConverter;
dataclass_DateValueConverter.__name__ = ["dataclass","DateValueConverter"];
dataclass_DateValueConverter.getTimeZone = function() {
	var now = new Date();
	now = new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);
	return 86400000. * Math.round(now.getTime() / 24 / 3600 / 1000) - now.getTime();
};
dataclass_DateValueConverter.prototype = {
	input: function(input) {
		var s = StringTools.trim(input);
		if(StringTools.endsWith(s,"Z")) {
			return new Date(s);
		}
		return HxOverrides.strDate(s);
	}
	,output: function(input) {
		var time;
		if(StringTools.endsWith(this.format,"Z")) {
			var t = -dataclass_DateValueConverter.getTimeZone();
			time = new Date(input.getTime() + t);
		} else {
			time = input;
		}
		return DateTools.format(time,this.format);
	}
	,__class__: dataclass_DateValueConverter
};
var dataclass_JsonConverter = function(options) {
	dataclass_Converter.call(this,options);
};
$hxClasses["dataclass.JsonConverter"] = dataclass_JsonConverter;
dataclass_JsonConverter.__name__ = ["dataclass","JsonConverter"];
dataclass_JsonConverter.fromJson = function(cls,json) {
	return dataclass_JsonConverter.current.toDataClass(cls,json);
};
dataclass_JsonConverter.toJson = function(cls) {
	return dataclass_JsonConverter.current.fromDataClass(cls);
};
dataclass_JsonConverter.__super__ = dataclass_Converter;
dataclass_JsonConverter.prototype = $extend(dataclass_Converter.prototype,{
	__class__: dataclass_JsonConverter
});
var haxe_Timer = function(time_ms) {
	var me = this;
	this.id = setInterval(function() {
		me.run();
	},time_ms);
};
$hxClasses["haxe.Timer"] = haxe_Timer;
haxe_Timer.__name__ = ["haxe","Timer"];
haxe_Timer.delay = function(f,time_ms) {
	var t = new haxe_Timer(time_ms);
	t.run = function() {
		t.stop();
		f();
	};
	return t;
};
haxe_Timer.prototype = {
	stop: function() {
		if(this.id == null) {
			return;
		}
		clearInterval(this.id);
		this.id = null;
	}
	,run: function() {
	}
	,__class__: haxe_Timer
};
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = ["haxe","ds","IntMap"];
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	keys: function() {
		var a = [];
		for( var key in this.h ) if(this.h.hasOwnProperty(key)) {
			a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_ObjectMap = function() {
	this.h = { __keys__ : { }};
};
$hxClasses["haxe.ds.ObjectMap"] = haxe_ds_ObjectMap;
haxe_ds_ObjectMap.__name__ = ["haxe","ds","ObjectMap"];
haxe_ds_ObjectMap.__interfaces__ = [haxe_IMap];
haxe_ds_ObjectMap.prototype = {
	set: function(key,value) {
		var id = key.__id__ || (key.__id__ = ++haxe_ds_ObjectMap.count);
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,remove: function(key) {
		var id = key.__id__;
		if(this.h.__keys__[id] == null) {
			return false;
		}
		delete(this.h[id]);
		delete(this.h.__keys__[id]);
		return true;
	}
	,__class__: haxe_ds_ObjectMap
};
var haxe_ds_Option = $hxEnums["haxe.ds.Option"] = { __ename__ : true, __constructs__ : ["Some","None"]
	,Some: ($_=function(v) { return {_hx_index:0,v:v,__enum__:"haxe.ds.Option",toString:$estr}; },$_.__params__ = ["v"],$_)
	,None: {_hx_index:1,__enum__:"haxe.ds.Option",toString:$estr}
};
var haxe_rtti_Meta = function() { };
$hxClasses["haxe.rtti.Meta"] = haxe_rtti_Meta;
haxe_rtti_Meta.__name__ = ["haxe","rtti","Meta"];
haxe_rtti_Meta.getType = function(t) {
	var meta = haxe_rtti_Meta.getMeta(t);
	if(meta == null || meta.obj == null) {
		return { };
	} else {
		return meta.obj;
	}
};
haxe_rtti_Meta.getMeta = function(t) {
	return t.__meta__;
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
$hxClasses["js._Boot.HaxeError"] = js__$Boot_HaxeError;
js__$Boot_HaxeError.__name__ = ["js","_Boot","HaxeError"];
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = ["js","Boot"];
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s += "\t";
				var tmp = n + "(";
				var _g = [];
				var _g1 = 0;
				var _g2 = con.__params__;
				while(_g1 < _g2.length) {
					var p = _g2[_g1];
					++_g1;
					_g.push(js_Boot.__string_rec(o[p],s));
				}
				return tmp + _g.join(",") + ")";
			} else {
				return n;
			}
		}
		if((o instanceof Array)) {
			var l = o.length;
			var i;
			var str = "[";
			s += "\t";
			var _g11 = 0;
			var _g3 = l;
			while(_g11 < _g3) {
				var i1 = _g11++;
				str += (i1 > 0 ? "," : "") + js_Boot.__string_rec(o[i1],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e1 ) {
			var e2 = (e1 instanceof js__$Boot_HaxeError) ? e1.val : e1;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str1 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str1.length != 2) {
			str1 += ", \n";
		}
		str1 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str1 += "\n" + s + "}";
		return str1;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = intf[_g1++];
			if(i == cl || js_Boot.__interfLoop(i,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		if((o instanceof Array)) {
			return o.__enum__ == null;
		} else {
			return false;
		}
		break;
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return true;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if((o instanceof cl)) {
					return true;
				}
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if((o instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return $hxEnums[o.__enum__] == cl;
	}
};
js_Boot.__cast = function(o,t) {
	if(js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw new js__$Boot_HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var mithril__$M_M_$Impl_$ = function() { };
$hxClasses["mithril._M.M_Impl_"] = mithril__$M_M_$Impl_$;
mithril__$M_M_$Impl_$.__name__ = ["mithril","_M","M_Impl_"];
mithril__$M_M_$Impl_$.routeLink = function(vnode) {
	return m.route.link(vnode);
};
var mithril_Mithril = function() { };
$hxClasses["mithril.Mithril"] = mithril_Mithril;
mithril_Mithril.__name__ = ["mithril","Mithril"];
var ui_ClientUI = function() {
};
$hxClasses["ui.ClientUI"] = ui_ClientUI;
ui_ClientUI.__name__ = ["ui","ClientUI"];
ui_ClientUI.__interfaces__ = [mithril_Mithril];
ui_ClientUI.prototype = {
	init: function() {
		var element = ($_=window.document,$bind($_,$_.querySelector));
		m.mount(element("header"),new ui_UIHeader());
		m.mount(element("main#develop"),new ui_UIDevelop());
		m.mount(element("main#content"),new ui_UIContent());
	}
	,__class__: ui_ClientUI
};
var ui_UIContent = function() {
};
$hxClasses["ui.UIContent"] = ui_UIContent;
ui_UIContent.__name__ = ["ui","UIContent"];
ui_UIContent.__interfaces__ = [mithril_Mithril];
ui_UIContent.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [new ui_content_HomeView().view(),new ui_content_ShelvesView().view(),new ui_content_BookView().view()];
	}
	,__class__: ui_UIContent
};
var ui_UIContentSearch = function() {
};
$hxClasses["ui.UIContentSearch"] = ui_UIContentSearch;
ui_UIContentSearch.__name__ = ["ui","UIContentSearch"];
ui_UIContentSearch.__interfaces__ = [mithril_Mithril];
ui_UIContentSearch.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return new ui_UIFilters().view();
	}
	,__class__: ui_UIContentSearch
};
var ui_UIFilters = function() {
};
$hxClasses["ui.UIFilters"] = ui_UIFilters;
ui_UIFilters.__name__ = ["ui","UIFilters"];
ui_UIFilters.__interfaces__ = [mithril_Mithril];
ui_UIFilters.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var f = data_FilterModel.instance.filterContent;
		var s = f != null ? "" + f.roomId + "/" + f.shelfId + "/" + f.bookId + "/" + f.chapterId + "/" + f.subchapterId : "null";
		var filterContentView = m.m("div","filter2: " + s);
		return m.m(".border",[m.m("h3","Filters:"),filterContentView]);
	}
	,__class__: ui_UIFilters
};
var ui_UIDevbuttons = function() {
};
$hxClasses["ui.UIDevbuttons"] = ui_UIDevbuttons;
ui_UIDevbuttons.__name__ = ["ui","UIDevbuttons"];
ui_UIDevbuttons.__interfaces__ = [mithril_Mithril];
ui_UIDevbuttons.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [m.m("button[type=button]",{ onclick : function(e) {
			data_UserLoader.instance.signIn("jonasnys@gmail.com","123456");
			return;
		}},"Log in as Jonas"),m.m("button[type=button]",{ onclick : function(e1) {
			m.redraw();
			return;
		}},"M.redraw()"),m.m("button[type=button]",{ onclick : function(e2) {
			data_ContentLoader.instance.load();
			return haxe_Timer.delay(function() {
				data_ContentLoader.instance.loadRealtimeUpdate();
				return;
			},3000);
		}},"Load Content"),m.m("button[type=button]",{ onclick : function(e3) {
			data_UserLoader.instance.load();
			return haxe_Timer.delay(function() {
				data_UserLoader.instance.loadRealtimeUpdate();
				return;
			},3000);
		}},"Load User"),m.m("button[type=button]",{ onclick : function(e4) {
			return data_ContentitemLoader.instance.load(["a"]);
		}},"Load contentitem")];
	}
	,__class__: ui_UIDevbuttons
};
var ui_UIDevelop = function() {
};
$hxClasses["ui.UIDevelop"] = ui_UIDevelop;
ui_UIDevelop.__name__ = ["ui","UIDevelop"];
ui_UIDevelop.__interfaces__ = [mithril_Mithril];
ui_UIDevelop.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [new ui_content_ContentTreeView(data_ContentModel.instance.content).view(),new ui_content_ContentTreeView(data_ContentFilters.sort(data_ContentModel.instance.content)).view(),new ui_UIFilters().view()];
	}
	,__class__: ui_UIDevelop
};
var ui_StateMonitor = function() {
};
$hxClasses["ui.StateMonitor"] = ui_StateMonitor;
ui_StateMonitor.__name__ = ["ui","StateMonitor"];
ui_StateMonitor.__interfaces__ = [mithril_Mithril];
ui_StateMonitor.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("div","Statemonitor")]);
	}
	,__class__: ui_StateMonitor
};
var ui_MInputEmail = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputEmail"] = ui_MInputEmail;
ui_MInputEmail.__name__ = ["ui","MInputEmail"];
ui_MInputEmail.__interfaces__ = [mithril_Mithril];
ui_MInputEmail.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=input][placeholder='Email']#email",{ style : { backgroundColor : this.state.validEmail ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserEmail_UserEmail_$Impl_$.isValid(str);
		this.state.email = str;
		this.state.validEmail = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputEmail
};
var ui_MInputPassword = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputPassword"] = ui_MInputPassword;
ui_MInputPassword.__name__ = ["ui","MInputPassword"];
ui_MInputPassword.__interfaces__ = [mithril_Mithril];
ui_MInputPassword.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=password][placeholder='Password']#password",{ style : { backgroundColor : this.state.validPassword ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserPassword_UserPassword_$Impl_$.isValid(str);
		this.state.password = str;
		this.state.validPassword = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputPassword
};
var ui_MLoginForm = function() {
	this.submitCallback = function(email,password) {
		console.log("src/ui/UIHeader.hx:62:","callback " + email + ", " + password);
		return;
	};
	this.state = null;
	this.state = { email : "", validEmail : false, password : "", validPassword : false};
};
$hxClasses["ui.MLoginForm"] = ui_MLoginForm;
ui_MLoginForm.__name__ = ["ui","MLoginForm"];
ui_MLoginForm.__interfaces__ = [mithril_Mithril];
ui_MLoginForm.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var enabled = this.state.validEmail && this.state.validPassword;
		var disabledString = enabled ? "" : "[disabled]";
		return m.m("form",[new ui_MInputEmail(this.state).view(),new ui_MInputPassword(this.state).view(),m.m("button[type=button]" + disabledString,{ onclick : function(e) {
			_gthis.submitCallback(_gthis.state.email,_gthis.state.password);
			return;
		}},"Logga in")]);
	}
	,__class__: ui_MLoginForm
};
var ui_MLogoutForm = function(clientUser) {
	this.clientUser = clientUser;
};
$hxClasses["ui.MLogoutForm"] = ui_MLogoutForm;
ui_MLogoutForm.__name__ = ["ui","MLogoutForm"];
ui_MLogoutForm.__interfaces__ = [mithril_Mithril];
ui_MLogoutForm.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		if(this.clientUser == null) {
			return m.m("div","clientUser == null");
		}
		var userData = this.clientUser.userData;
		return m.m("form",[m.m("div","Välkommen, " + userData.firstname + " " + userData.lastname + "!" + " access:" + userData.access + " active domain:" + this.clientUser.userConfig.domain),m.m("button[type=button]",{ onclick : function(e) {
			data_UserLoader.instance.signOut();
			return;
		}},"Logga ut")]);
	}
	,setUser: function(u) {
		this.clientUser = u;
		return this;
	}
	,__class__: ui_MLogoutForm
};
var ui_UIHeader = function() {
	this.logoutform = null;
	this.loginform = null;
	this.loginform = new ui_MLoginForm();
	this.logoutform = new ui_MLogoutForm();
	this.loginform.submitCallback = function(email,password) {
		data_UserLoader.instance.signIn(email,password);
		return;
	};
};
$hxClasses["ui.UIHeader"] = ui_UIHeader;
ui_UIHeader.__name__ = ["ui","UIHeader"];
ui_UIHeader.__interfaces__ = [mithril_Mithril];
ui_UIHeader.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var userView;
		var _g = data_UserModel.instance.clientUserState;
		switch(_g._hx_index) {
		case 0:
			userView = this.loginform.view();
			break;
		case 1:
			userView = m.m("div","Loading user data...");
			break;
		case 2:
			var user = data_UserModel.instance.clientUser;
			userView = this.logoutform.setUser(user).view();
			break;
		}
		return [m.m("h3","" + Std.string(data_UserModel.instance.clientUser.userData)),userView];
	}
	,__class__: ui_UIHeader
};
var ui_content_HomeView = function() {
};
$hxClasses["ui.content.HomeView"] = ui_content_HomeView;
ui_content_HomeView.__name__ = ["ui","content","HomeView"];
ui_content_HomeView.__interfaces__ = [mithril_Mithril];
ui_content_HomeView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var room = data_FilterModel.instance.getRoom();
		var homeshelfView;
		try {
			homeshelfView = new ui_content_UIShelvesList([data_FilterModel.instance.getRoomHomeshelf()]).view();
		} catch( e ) {
			var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
			homeshelfView = m.m("h3.error","404 - can not show homeshelf for room  " + Std.string(data_FilterModel.instance.filterContent));
		}
		var othershelvesView;
		try {
			othershelvesView = m.m("nav",data_FilterModel.instance.getRoomShelvesExceptHomeshelf().map(function(shelf) {
				var selected = shelf == data_FilterModel.instance.getShelf() ? ".selected" : "";
				return m.m("a" + selected,{ href : "/content" + shelf.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"" + shelf.title);
			}));
		} catch( e2 ) {
			var e3 = (e2 instanceof js__$Boot_HaxeError) ? e2.val : e2;
			othershelvesView = m.m("h3.error","404 - can not show other shelves for room  " + Std.string(data_FilterModel.instance.filterContent));
		}
		var homeView;
		try {
			homeView = [m.m("a.border",{ href : "/content" + room.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Room: " + data_FilterModel.instance.getRoom().title),m.m("div","Homeshelf:"),homeshelfView,m.m("div","Other shelves:"),othershelvesView];
		} catch( e4 ) {
			var e5 = (e4 instanceof js__$Boot_HaxeError) ? e4.val : e4;
			homeView = m.m("h1.error","404 - can not show room " + Std.string(data_FilterModel.instance.filterContent));
		}
		return m.m("div.border",[m.m("h1","homepage"),homeView]);
	}
	,__class__: ui_content_HomeView
};
var ui_content_ShelvesView = function() {
};
$hxClasses["ui.content.ShelvesView"] = ui_content_ShelvesView;
ui_content_ShelvesView.__name__ = ["ui","content","ShelvesView"];
ui_content_ShelvesView.__interfaces__ = [mithril_Mithril];
ui_content_ShelvesView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div.border",[m.m("h1","shelves"),m.m("p",[m.m("a",{ href : "/content" + data_FilterModel.instance.getRoom().path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Visa alla")]),m.m("div",data_FilterModel.instance.getShelves().map(function(shelf) {
			var a = m.m("a",{ href : "/content" + shelf.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"" + shelf.title);
			return m.m("div.border",[a,m.m("nav",[shelf.books.map(function(book) {
				var selected = book == data_FilterModel.instance.getBook() ? ".selected" : "";
				return m.m("a" + selected,{ href : "/content" + book.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"" + book.title);
			})])]);
		}))]);
	}
	,__class__: ui_content_ShelvesView
};
var ui_content_BookView = function() {
};
$hxClasses["ui.content.BookView"] = ui_content_BookView;
ui_content_BookView.__name__ = ["ui","content","BookView"];
ui_content_BookView.__interfaces__ = [mithril_Mithril];
ui_content_BookView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var book = data_FilterModel.instance.getBook();
		var bookView;
		try {
			bookView = book == null ? m.m("div","No book selected") : [m.m("h1","" + book.title),m.m("p","" + book.info),m.m("div","Nr of chapters:" + book.chapters.length)];
		} catch( e ) {
			var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
			bookView = m.m(".error","404 - Can not show book: " + Std.string(book));
		}
		var chapter = data_FilterModel.instance.getChapter();
		var chapterView;
		try {
			chapterView = chapter == null ? m.m("div","No chapter selected") : [m.m("h3","" + chapter.title),m.m("p","" + HxOverrides.substr(chapter.text,0,50) + "...")];
		} catch( e2 ) {
			var e3 = (e2 instanceof js__$Boot_HaxeError) ? e2.val : e2;
			chapterView = m.m("div","Chapter does not exist");
		}
		var chapters = data_FilterModel.instance.getChapters();
		var chaptersView;
		try {
			chaptersView = [m.m("div.border","Chapters length:" + chapters.length),m.m("nav",chapters.map(function(chap) {
				var selected = chap == data_FilterModel.instance.getChapter() ? ".selected" : "";
				return m.m("a" + selected,{ href : "/content" + chap.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"" + chap.title);
			}))];
		} catch( e4 ) {
			var e5 = (e4 instanceof js__$Boot_HaxeError) ? e4.val : e4;
			chaptersView = m.m("div.border","No chapters");
		}
		var subchapter = data_FilterModel.instance.getSubchapter();
		var subchapterView;
		try {
			subchapterView = subchapter == null ? m.m("div","No subchapter selected") : [m.m("h3","" + subchapter.title),m.m("p","" + HxOverrides.substr(subchapter.text,0,50) + "...")];
		} catch( e6 ) {
			var e7 = (e6 instanceof js__$Boot_HaxeError) ? e6.val : e6;
			subchapterView = m.m("div","Subchapter does not exist");
		}
		var subchapters = data_FilterModel.instance.getSubchapters();
		var subchaptersView;
		try {
			subchaptersView = [m.m("div.border","Subchapters length:" + subchapters.length),m.m("nav",subchapters.map(function(sub) {
				var selected1 = sub == data_FilterModel.instance.getSubchapter() ? ".selected" : "";
				return m.m("a" + selected1,{ href : "/content" + sub.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"" + sub.title);
			}))];
		} catch( e8 ) {
			var e9 = (e8 instanceof js__$Boot_HaxeError) ? e8.val : e8;
			subchaptersView = m.m("div.border","No subchapters");
		}
		return m.m("div.border",[bookView,chaptersView,chapterView,subchaptersView,subchapterView]);
	}
	,__class__: ui_content_BookView
};
var ui_content_UIShelvesList = function(shelves) {
	this.shelves = shelves;
};
$hxClasses["ui.content.UIShelvesList"] = ui_content_UIShelvesList;
ui_content_UIShelvesList.__name__ = ["ui","content","UIShelvesList"];
ui_content_UIShelvesList.__interfaces__ = [mithril_Mithril];
ui_content_UIShelvesList.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div.grid1",this.shelves.map(function(shelf) {
			var a = m.m("a",{ href : "/content" + shelf.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Shelf: " + shelf.path);
			return m.m("div.border",[a]);
		}));
	}
	,__class__: ui_content_UIShelvesList
};
var ui_content_UIBooksList = function(books) {
	this.books = books;
};
$hxClasses["ui.content.UIBooksList"] = ui_content_UIBooksList;
ui_content_UIBooksList.__name__ = ["ui","content","UIBooksList"];
ui_content_UIBooksList.__interfaces__ = [mithril_Mithril];
ui_content_UIBooksList.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div.grid4",this.books.map(function(book) {
			return m.m("a",{ href : "/book" + book.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Book: " + book.path);
		}));
	}
	,__class__: ui_content_UIBooksList
};
var ui_content_ContentTreeView = function(content) {
	this.content = content;
};
$hxClasses["ui.content.ContentTreeView"] = ui_content_ContentTreeView;
ui_content_ContentTreeView.__name__ = ["ui","content","ContentTreeView"];
ui_content_ContentTreeView.__interfaces__ = [mithril_Mithril];
ui_content_ContentTreeView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var path = this.content.id;
		return m.m("details[open]",[m.m("summary","Content " + this.content.id)].concat(this.content.rooms.map(function(child) {
			return new ui_content_UIRoom(child).view();
		})));
	}
	,__class__: ui_content_ContentTreeView
};
var ui_content_UIRoom = function(item) {
	this.item = null;
	this.item = item;
};
$hxClasses["ui.content.UIRoom"] = ui_content_UIRoom;
ui_content_UIRoom.__name__ = ["ui","content","UIRoom"];
ui_content_UIRoom.__interfaces__ = [mithril_Mithril];
ui_content_UIRoom.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var children = this.item.shelves != null ? this.item.shelves : [];
		var anchor = m.m("a",{ href : "/content" + this.item.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Room:" + this.item.title + ":" + this.item.path);
		return m.m("details[open]",[m.m("summary",[anchor])].concat(children.map(function(child) {
			return new ui_content_UIShelf(child).view();
		})));
	}
	,__class__: ui_content_UIRoom
};
var ui_content_UIShelf = function(item) {
	this.item = item;
};
$hxClasses["ui.content.UIShelf"] = ui_content_UIShelf;
ui_content_UIShelf.__name__ = ["ui","content","UIShelf"];
ui_content_UIShelf.__interfaces__ = [mithril_Mithril];
ui_content_UIShelf.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var books = this.item.books != null ? this.item.books : [];
		var css = "access" + this.item.access;
		var anchor = m.m("a",{ href : "/content" + this.item.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Shelf:" + this.item.title + ":" + this.item.path);
		return m.m("details[openx]." + css,[m.m("summary",[anchor])].concat(books.map(function(child) {
			return new ui_content_UIBook(child).view();
		})));
	}
	,__class__: ui_content_UIShelf
};
var ui_content_UIBook = function(item) {
	this.item = null;
	this.item = item;
};
$hxClasses["ui.content.UIBook"] = ui_content_UIBook;
ui_content_UIBook.__name__ = ["ui","content","UIBook"];
ui_content_UIBook.__interfaces__ = [mithril_Mithril];
ui_content_UIBook.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.chapters != null ? this.item.chapters : [];
		var css = "access" + this.item.access;
		var anchor = m.m("a",{ href : "/content" + this.item.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Book:" + this.item.title + ":" + this.item.path);
		return m.m("details[openx]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child).view();
		})));
	}
	,__class__: ui_content_UIBook
};
var ui_content_UIChapter = function(item) {
	this.item = null;
	this.item = item;
};
$hxClasses["ui.content.UIChapter"] = ui_content_UIChapter;
ui_content_UIChapter.__name__ = ["ui","content","UIChapter"];
ui_content_UIChapter.__interfaces__ = [mithril_Mithril];
ui_content_UIChapter.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.subchapters != null ? this.item.subchapters : [];
		var css = "access" + this.item.access;
		var anchor = m.m("a",{ href : "/content" + this.item.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Chapter:" + this.item.title + ":" + this.item.path);
		return m.m("details[openx]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UISubchapter(child).view();
		})));
	}
	,__class__: ui_content_UIChapter
};
var ui_content_UISubchapter = function(item) {
	this.item = null;
	this.item = item;
};
$hxClasses["ui.content.UISubchapter"] = ui_content_UISubchapter;
ui_content_UISubchapter.__name__ = ["ui","content","UISubchapter"];
ui_content_UISubchapter.__interfaces__ = [mithril_Mithril];
ui_content_UISubchapter.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.subchapters != null ? this.item.subchapters : [];
		var css = "access" + this.item.access;
		var anchor = m.m("a",{ href : "/content" + this.item.path, oncreate : mithril__$M_M_$Impl_$.routeLink},"Subhapter:" + this.item.title + ":" + this.item.path);
		return m.m("details[open]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child).view();
		})));
	}
	,__class__: ui_content_UISubchapter
};
var utils__$UserEmail_UserEmail_$Impl_$ = {};
$hxClasses["utils._UserEmail.UserEmail_Impl_"] = utils__$UserEmail_UserEmail_$Impl_$;
utils__$UserEmail_UserEmail_$Impl_$.__name__ = ["utils","_UserEmail","UserEmail_Impl_"];
utils__$UserEmail_UserEmail_$Impl_$.isValid = function(address) {
	return utils__$UserEmail_UserEmail_$Impl_$.ereg.match(address);
};
utils__$UserEmail_UserEmail_$Impl_$.makePiped = function(email) {
	return StringTools.replace(StringTools.replace(email,"@","||"),".","|");
};
utils__$UserEmail_UserEmail_$Impl_$.toPiped = function(this1) {
	return utils__$UserEmail_UserEmail_$Impl_$.makePiped(this1);
};
var utils__$UserPassword_UserPassword_$Impl_$ = {};
$hxClasses["utils._UserPassword.UserPassword_Impl_"] = utils__$UserPassword_UserPassword_$Impl_$;
utils__$UserPassword_UserPassword_$Impl_$.__name__ = ["utils","_UserPassword","UserPassword_Impl_"];
utils__$UserPassword_UserPassword_$Impl_$.isValid = function(str) {
	return str.length > 3;
};
function $getIterator(o) { if( o instanceof Array ) return HxOverrides.iter(o); else return o.iterator(); }
var $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$hxClasses["Math"] = Math;
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = ["String"];
$hxClasses["Array"] = Array;
Array.__name__ = ["Array"];
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = ["Date"];
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
var __map_reserved = {};
haxe_ds_ObjectMap.count = 0;
Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{ get : function() {
	return String(this.val);
}});
try {
var __varName = window.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName);
} catch(_) {}
try {
GLOBAL.m = require("mithril");
var __varName1 = GLOBAL.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName1);
} catch(_) {}
DateTools.DAY_SHORT_NAMES = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
DateTools.DAY_NAMES = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
DateTools.MONTH_SHORT_NAMES = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
DateTools.MONTH_NAMES = ["January","February","March","April","May","June","July","August","September","October","November","December"];
data_UserData.__meta__ = { obj : { dataClassRtti : [{ firstname : "String", lastname : "String", email : "String", domains : "Array<String>", access : "Int"}]}};
data_UserConfig.__meta__ = { obj : { dataClassRtti : [{ domain : "String"}]}};
data_ClientUser.__meta__ = { obj : { dataClassRtti : [{ userData : "DataClass<data.UserData>", userConfig : "DataClass<data.UserConfig>"}]}};
data_Content.__meta__ = { obj : { dataClassRtti : [{ id : "String", rooms : "Array<DataClass<data.Room>>"}]}, fields : { path : { exclude : null}}};
data_Room.__meta__ = { obj : { dataClassRtti : [{ id : "String", shelves : "Array<DataClass<data.Shelf>>", title : "String", sort : "Int"}]}, fields : { path : { exclude : null}}};
data_Shelf.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", info : "String", books : "Array<DataClass<data.Book>>", sort : "Int", type : "String"}]}, fields : { path : { exclude : null}}};
data_Book.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "String", info : "String", chapters : "Array<DataClass<data.Chapter>>", sort : "Int"}]}, fields : { path : { exclude : null}}};
data_Chapter.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "String", info : "String", text : "String", subchapters : "Array<DataClass<data.Chapter>>", sort : "Int"}]}, fields : { path : { exclude : null}}};
data_ContentLoader.instance = new data_ContentLoader();
data_ErrorsAndLogs.element = ($_=window.document,$bind($_,$_.querySelector));
data_ErrorsAndLogs.logs = [];
data_ErrorsAndLogs.errors = [];
data_ContentModel.instance = new data_ContentModel();
data_ContentitemLoader.instance = new data_ContentitemLoader();
data_FilterModel.instance = new data_FilterModel();
data_FirebaseModel.instance = new data_FirebaseModel();
data_Routes.instance = new data_Routes();
data_UserLoader.instance = new data_UserLoader();
data_UserModel.instance = new data_UserModel();
dataclass_Converter.directConversions = ["Int","Bool","Float","String"];
dataclass_Converter.enumCache = new haxe_ds_StringMap();
dataclass_Converter.classCache = new haxe_ds_StringMap();
dataclass_JsonConverter.current = new dataclass_JsonConverter();
js_Boot.__toStr = ({ }).toString;
ui_ClientUI.instance = new ui_ClientUI();
utils__$UserEmail_UserEmail_$Impl_$.ereg = new EReg("^[\\w-\\.]{2,}@[\\w-\\.]{2,}\\.[a-z]{2,6}$","i");
Client.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
