// Generated by Haxe 4.0.0-preview.4+1e3e5e016
(function ($global) { "use strict";
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = {},$_;
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var Client = function() {
	firebase.initializeApp({ apiKey : "AIzaSyBGLErhUSfQHA4wOtkid206KVE-96QEN04", authDomain : "fb-stack.firebaseapp.com", databaseURL : "https://fb-stack.firebaseio.com", projectId : "fb-stack", storageBucket : "fb-stack.appspot.com", messagingSenderId : "665827748546"});
	data_ContentModel.instance.init();
	data_UserModel.instance.init();
	ui_ClientUI.instance.init();
};
$hxClasses["Client"] = Client;
Client.__name__ = true;
Client.main = function() {
	new Client();
};
Client.prototype = {
	__class__: Client
};
var DataClass = function() { };
$hxClasses["DataClass"] = DataClass;
DataClass.__name__ = true;
var DateTools = function() { };
$hxClasses["DateTools"] = DateTools;
DateTools.__name__ = true;
DateTools.__format_get = function(d,e) {
	switch(e) {
	case "%":
		return "%";
	case "A":
		return DateTools.DAY_NAMES[d.getDay()];
	case "B":
		return DateTools.MONTH_NAMES[d.getMonth()];
	case "C":
		return StringTools.lpad(Std.string(d.getFullYear() / 100 | 0),"0",2);
	case "D":
		return DateTools.__format(d,"%m/%d/%y");
	case "F":
		return DateTools.__format(d,"%Y-%m-%d");
	case "I":case "l":
		var hour = d.getHours() % 12;
		return StringTools.lpad(Std.string(hour == 0 ? 12 : hour),e == "I" ? "0" : " ",2);
	case "M":
		return StringTools.lpad(Std.string(d.getMinutes()),"0",2);
	case "R":
		return DateTools.__format(d,"%H:%M");
	case "S":
		return StringTools.lpad(Std.string(d.getSeconds()),"0",2);
	case "T":
		return DateTools.__format(d,"%H:%M:%S");
	case "Y":
		return Std.string(d.getFullYear());
	case "a":
		return DateTools.DAY_SHORT_NAMES[d.getDay()];
	case "b":case "h":
		return DateTools.MONTH_SHORT_NAMES[d.getMonth()];
	case "d":
		return StringTools.lpad(Std.string(d.getDate()),"0",2);
	case "e":
		return Std.string(d.getDate());
	case "H":case "k":
		return StringTools.lpad(Std.string(d.getHours()),e == "H" ? "0" : " ",2);
	case "m":
		return StringTools.lpad(Std.string(d.getMonth() + 1),"0",2);
	case "n":
		return "\n";
	case "p":
		if(d.getHours() > 11) {
			return "PM";
		} else {
			return "AM";
		}
		break;
	case "r":
		return DateTools.__format(d,"%I:%M:%S %p");
	case "s":
		return Std.string(d.getTime() / 1000 | 0);
	case "t":
		return "\t";
	case "u":
		var t = d.getDay();
		if(t == 0) {
			return "7";
		} else if(t == null) {
			return "null";
		} else {
			return "" + t;
		}
		break;
	case "w":
		return Std.string(d.getDay());
	case "y":
		return StringTools.lpad(Std.string(d.getFullYear() % 100),"0",2);
	default:
		throw new js__$Boot_HaxeError("Date.format %" + e + "- not implemented yet.");
	}
};
DateTools.__format = function(d,f) {
	var r_b = "";
	var p = 0;
	while(true) {
		var np = f.indexOf("%",p);
		if(np < 0) {
			break;
		}
		var len = np - p;
		r_b += len == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len);
		r_b += Std.string(DateTools.__format_get(d,HxOverrides.substr(f,np + 1,1)));
		p = np + 2;
	}
	var len1 = f.length - p;
	r_b += len1 == null ? HxOverrides.substr(f,p,null) : HxOverrides.substr(f,p,len1);
	return r_b;
};
DateTools.format = function(d,f) {
	return DateTools.__format(d,f);
};
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = true;
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = true;
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Lambda = function() { };
$hxClasses["Lambda"] = Lambda;
Lambda.__name__ = true;
Lambda.has = function(it,elt) {
	var x = $getIterator(it);
	while(x.hasNext()) if(x.next() == elt) {
		return true;
	}
	return false;
};
Lambda.iter = function(it,f) {
	var x = $getIterator(it);
	while(x.hasNext()) f(x.next());
};
Math.__name__ = true;
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = true;
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		return null;
	}
};
Reflect.setProperty = function(o,field,value) {
	var tmp;
	var tmp1;
	if(o.__properties__) {
		tmp = o.__properties__["set_" + field];
		tmp1 = tmp;
	} else {
		tmp1 = false;
	}
	if(tmp1) {
		o[tmp](value);
	} else {
		o[field] = value;
	}
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) {
		v = parseInt(x);
	}
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = true;
StringTools.startsWith = function(s,start) {
	if(s.length >= start.length) {
		return HxOverrides.substr(s,0,start.length) == start;
	} else {
		return false;
	}
};
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	if(slen >= elen) {
		return HxOverrides.substr(s,slen - elen,elen) == end;
	} else {
		return false;
	}
};
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,r,l - r);
	} else {
		return s;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
StringTools.lpad = function(s,c,l) {
	if(c.length <= 0) {
		return s;
	}
	while(s.length < l) s = c + s;
	return s;
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = true;
Type.createInstance = function(cl,args) {
	return new (Function.prototype.bind.apply(cl,[null].concat(args)));
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw new js__$Boot_HaxeError("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw new js__$Boot_HaxeError("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw new js__$Boot_HaxeError("Constructor " + constr + " does not need parameters");
	}
	return f;
};
var data_UserData = function(data1) {
	this.access = 1;
	this.domains = ["kak"];
	this.set_firstname(data1.firstname);
	this.set_lastname(data1.lastname);
	this.set_email(data1.email);
	if(Object.prototype.hasOwnProperty.call(data1,"domains")) {
		this.set_domains(data1.domains);
	}
	if(Object.prototype.hasOwnProperty.call(data1,"access")) {
		this.set_access(data1.access);
	}
};
$hxClasses["data.UserData"] = data_UserData;
data_UserData.__name__ = true;
data_UserData.__interfaces__ = [DataClass];
data_UserData.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"firstname")) {
		output.push("firstname");
	} else if(data1.firstname == null) {
		output.push("firstname");
	}
	if(!Object.prototype.hasOwnProperty.call(data1,"lastname")) {
		output.push("lastname");
	} else if(data1.lastname == null) {
		output.push("lastname");
	}
	if(!Object.prototype.hasOwnProperty.call(data1,"email")) {
		output.push("email");
	} else if(data1.email == null) {
		output.push("email");
	}
	return output;
};
data_UserData.prototype = {
	set_firstname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.firstname.");
		}
		return this.firstname = v;
	}
	,set_lastname: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.lastname.");
		}
		return this.lastname = v;
	}
	,set_email: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.email.");
		}
		return this.email = v;
	}
	,set_domains: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.domains.");
		}
		return this.domains = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserData.access.");
		}
		return this.access = v;
	}
	,__class__: data_UserData
	,__properties__: {set_access:"set_access",set_domains:"set_domains",set_email:"set_email",set_lastname:"set_lastname",set_firstname:"set_firstname"}
};
var data_UserConfig = function(data1) {
	this.set_domain(data1.domain);
};
$hxClasses["data.UserConfig"] = data_UserConfig;
data_UserConfig.__name__ = true;
data_UserConfig.__interfaces__ = [DataClass];
data_UserConfig.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"domain")) {
		output.push("domain");
	} else if(data1.domain == null) {
		output.push("domain");
	}
	return output;
};
data_UserConfig.prototype = {
	set_domain: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for UserConfig.domain.");
		}
		return this.domain = v;
	}
	,__class__: data_UserConfig
	,__properties__: {set_domain:"set_domain"}
};
var data_ClientUser = function(data1) {
	this.set_userData(data1.userData);
	this.set_userConfig(data1.userConfig);
};
$hxClasses["data.ClientUser"] = data_ClientUser;
data_ClientUser.__name__ = true;
data_ClientUser.__interfaces__ = [DataClass];
data_ClientUser.prototype = {
	set_userData: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ClientUser.userData.");
		}
		return this.userData = v;
	}
	,set_userConfig: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for ClientUser.userConfig.");
		}
		return this.userConfig = v;
	}
	,__class__: data_ClientUser
	,__properties__: {set_userConfig:"set_userConfig",set_userData:"set_userData"}
};
var data_Content = function(data1) {
	this.rooms = [];
	this.set_id(data1.id);
	if(Object.prototype.hasOwnProperty.call(data1,"rooms")) {
		this.set_rooms(data1.rooms);
	}
};
$hxClasses["data.Content"] = data_Content;
data_Content.__name__ = true;
data_Content.__interfaces__ = [DataClass];
data_Content.populate = function(id,rms) {
	id = id == null ? "content" + data_Content.uid++ : id;
	return new data_Content({ id : id, rooms : rms});
};
data_Content.validate = function(data1) {
	var output = [];
	if(!Object.prototype.hasOwnProperty.call(data1,"id")) {
		output.push("id");
	} else if(data1.id == null) {
		output.push("id");
	}
	return output;
};
data_Content.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Content.id.");
		}
		return this.id = v;
	}
	,set_rooms: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Content.rooms.");
		}
		return this.rooms = v;
	}
	,__class__: data_Content
	,__properties__: {set_rooms:"set_rooms",set_id:"set_id"}
};
var data_Room = function(data1) {
	this.sort = 0;
	this.textcolor = "black";
	this.color = "yellow";
	this.title = "defaultRoomTitle";
	this.shelves = [];
	this.id = "defaultRoomId";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"shelves")) {
			this.set_shelves(data1.shelves);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"color")) {
			this.set_color(data1.color);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"textcolor")) {
			this.set_textcolor(data1.textcolor);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Room"] = data_Room;
data_Room.__name__ = true;
data_Room.__interfaces__ = [DataClass];
data_Room.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.id.");
		}
		return this.id = v;
	}
	,set_shelves: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.shelves.");
		}
		return this.shelves = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.title.");
		}
		return this.title = v;
	}
	,set_color: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.color.");
		}
		return this.color = v;
	}
	,set_textcolor: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.textcolor.");
		}
		return this.textcolor = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Room.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Room
	,__properties__: {set_sort:"set_sort",set_textcolor:"set_textcolor",set_color:"set_color",set_title:"set_title",set_shelves:"set_shelves",set_id:"set_id"}
};
var data_Shelf = function(data1) {
	this.sort = 0;
	this.books = [];
	this.info = "defaultShelfInfo";
	this.access = 0;
	this.title = "defaultShelfTitle";
	this.id = "defaultShelfId";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"books")) {
			this.set_books(data1.books);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Shelf"] = data_Shelf;
data_Shelf.__name__ = true;
data_Shelf.__interfaces__ = [DataClass];
data_Shelf.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.access.");
		}
		return this.access = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.info.");
		}
		return this.info = v;
	}
	,set_books: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.books.");
		}
		return this.books = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Shelf.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Shelf
	,__properties__: {set_sort:"set_sort",set_books:"set_books",set_info:"set_info",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_Book = function(data1) {
	this.sort = 0;
	this.chapters = [];
	this.info = "defaultBookInfo";
	this.type = "standard";
	this.access = 0;
	this.title = "defaultBookTitle";
	this.id = "defaultBookId";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"type")) {
			this.set_type(data1.type);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"chapters")) {
			this.set_chapters(data1.chapters);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Book"] = data_Book;
data_Book.__name__ = true;
data_Book.__interfaces__ = [DataClass];
data_Book.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.info.");
		}
		return this.info = v;
	}
	,set_chapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.chapters.");
		}
		return this.chapters = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Book.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Book
	,__properties__: {set_sort:"set_sort",set_chapters:"set_chapters",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_Chapter = function(data1) {
	this.sort = 0;
	this.subchapters = [];
	this.text = "defaultChapterText";
	this.info = "defaultChapterInfo";
	this.type = "article";
	this.access = 0;
	this.title = "defaultChapterTitle";
	this.id = "defaultChapterId";
	if(data1 != null) {
		if(Object.prototype.hasOwnProperty.call(data1,"id")) {
			this.set_id(data1.id);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"title")) {
			this.set_title(data1.title);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"access")) {
			this.set_access(data1.access);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"type")) {
			this.set_type(data1.type);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"info")) {
			this.set_info(data1.info);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"text")) {
			this.set_text(data1.text);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"subchapters")) {
			this.set_subchapters(data1.subchapters);
		}
		if(Object.prototype.hasOwnProperty.call(data1,"sort")) {
			this.set_sort(data1.sort);
		}
	}
};
$hxClasses["data.Chapter"] = data_Chapter;
data_Chapter.__name__ = true;
data_Chapter.__interfaces__ = [DataClass];
data_Chapter.prototype = {
	set_id: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.id.");
		}
		return this.id = v;
	}
	,set_title: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.title.");
		}
		return this.title = v;
	}
	,set_access: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.access.");
		}
		return this.access = v;
	}
	,set_type: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.type.");
		}
		return this.type = v;
	}
	,set_info: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.info.");
		}
		return this.info = v;
	}
	,set_text: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.text.");
		}
		return this.text = v;
	}
	,set_subchapters: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.subchapters.");
		}
		return this.subchapters = v;
	}
	,set_sort: function(v) {
		if(v == null) {
			throw new js__$Boot_HaxeError("DataClass validation failed for Chapter.sort.");
		}
		return this.sort = v;
	}
	,__class__: data_Chapter
	,__properties__: {set_sort:"set_sort",set_subchapters:"set_subchapters",set_text:"set_text",set_info:"set_info",set_type:"set_type",set_access:"set_access",set_title:"set_title",set_id:"set_id"}
};
var data_ContentFilters = function() { };
$hxClasses["data.ContentFilters"] = data_ContentFilters;
data_ContentFilters.__name__ = true;
data_ContentFilters.fiterRoomAndShelfHome = function(ct) {
	return new data_Content({ id : ct.id, rooms : ct.rooms.filter(function(room) {
		return room.id == "home";
	}).map(function(room1) {
		return new data_Room({ id : room1.id, title : room1.title, shelves : room1.shelves.filter(function(shelf) {
			console.log("src/data/Content.hx:87:",shelf.id);
			return shelf.id == "home";
		})});
	})});
};
data_ContentFilters.sort = function(ct) {
	var a = ct.rooms;
	a.sort(function(a1,b) {
		return a1.sort - b.sort;
	});
	Lambda.iter(a,function(room) {
		var a2 = room.shelves;
		a2.sort(function(a3,b1) {
			return a3.sort - b1.sort;
		});
		Lambda.iter(a2,function(shelf) {
			var a4 = shelf.books;
			a4.sort(function(a5,b2) {
				return a5.sort - b2.sort;
			});
			return a4;
		});
		return;
	});
	return ct;
};
var data_ErrorsAndLogs = function() { };
$hxClasses["data.ErrorsAndLogs"] = data_ErrorsAndLogs;
data_ErrorsAndLogs.__name__ = true;
data_ErrorsAndLogs.addLog = function(log) {
	data_ErrorsAndLogs.logs.unshift(log);
	console.log("src/data/ErrorsAndLogs.hx:14:",log);
	var el = window.document.createElement("div");
	el.textContent = log;
	data_ErrorsAndLogs.element("#logs").appendChild(el);
};
data_ErrorsAndLogs.addError = function(e) {
	data_ErrorsAndLogs.errors.unshift(e);
	var el = window.document.createElement("div");
	el.textContent = e;
	data_ErrorsAndLogs.element("#errors").appendChild(el);
};
var data_ContentModel = function() {
	data_ErrorsAndLogs.addLog("new content");
};
$hxClasses["data.ContentModel"] = data_ContentModel;
data_ContentModel.__name__ = true;
data_ContentModel.prototype = {
	set_content: function(u) {
		this.content = u;
		data_ErrorsAndLogs.addLog("Content:" + Std.string(this.content));
		m.redraw();
		return u;
	}
	,init: function() {
		this.set_content(dataclass_JsonConverter.fromJson(data_Content,data_ContentModel.defaultData));
	}
	,__class__: data_ContentModel
	,__properties__: {set_content:"set_content"}
};
var data_UserLoader = function() {
};
$hxClasses["data.UserLoader"] = data_UserLoader;
data_UserLoader.__name__ = true;
data_UserLoader.prototype = {
	signIn: function(email,password) {
		this.validate(email,password).then(function(valid) {
			data_UserModel.instance.setLoadingUser();
			return firebase.auth().signInWithEmailAndPassword(email,password);
		}).then(function(user) {
			console.log("src/data/UserLoader.hx:81:","USER " + user);
			return null;
		})["catch"](function(error) {
			console.log("src/data/UserLoader.hx:85:","ERROR" + error);
			data_ErrorsAndLogs.addError("error:" + error);
			data_UserModel.instance.setAnonymousUser();
			return;
		});
	}
	,signOut: function() {
		firebase.auth().signOut();
	}
	,validate: function(email,password) {
		return new Promise(function(res,rej) {
			try {
				if(!utils__$UserEmail_UserEmail_$Impl_$.isValid(email)) {
					throw new js__$Boot_HaxeError("User email is not valid: " + email);
				}
				if(!utils__$UserPassword_UserPassword_$Impl_$.isValid(password)) {
					throw new js__$Boot_HaxeError("User password is not valid: " + password);
				}
				res(true);
			} catch( e ) {
				rej((e instanceof js__$Boot_HaxeError) ? e.val : e);
			}
			return;
		});
	}
	,__class__: data_UserLoader
};
var data_UserModel = function() {
};
$hxClasses["data.UserModel"] = data_UserModel;
data_UserModel.__name__ = true;
data_UserModel.prototype = {
	set_clientUser: function(val) {
		this.clientUser = val;
		data_ErrorsAndLogs.addLog("ClientUser:" + Std.string(this.clientUser));
		m.redraw();
		return this.clientUser;
	}
	,init: function() {
		data_ErrorsAndLogs.addLog("UserModel.instance.init()");
		this.setAnonymousUser();
	}
	,setAnonymousUser: function() {
		this.set_clientUser(new data_ClientUser(this.anonymousUser()));
		this.clientUserState = data_ClientUserState.Anonymous;
	}
	,setLoadingUser: function() {
		this.clientUserState = data_ClientUserState.Loading;
		m.redraw();
	}
	,anonymousUser: function() {
		return { userData : { firstname : "Anonymous", lastname : "Anonymousson", email : "anon@anon.abc", domains : ["domain1"], access : 0}, userConfig : { domain : "domain1"}};
	}
	,__class__: data_UserModel
	,__properties__: {set_clientUser:"set_clientUser"}
};
var data_ClientUserState = $hxEnums["data.ClientUserState"] = { __ename__ : true, __constructs__ : ["Anonymous","Loading","User"]
	,Anonymous: {_hx_index:0,__enum__:"data.ClientUserState",toString:$estr}
	,Loading: {_hx_index:1,__enum__:"data.ClientUserState",toString:$estr}
	,User: {_hx_index:2,__enum__:"data.ClientUserState",toString:$estr}
};
var dataclass_CircularReferenceHandling = $hxEnums["dataclass.CircularReferenceHandling"] = { __ename__ : true, __constructs__ : ["ThrowException","SetToNull","TrackReferences"]
	,ThrowException: {_hx_index:0,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,SetToNull: {_hx_index:1,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
	,TrackReferences: {_hx_index:2,__enum__:"dataclass.CircularReferenceHandling",toString:$estr}
};
var dataclass_Rtti = function() { };
$hxClasses["dataclass.Rtti"] = dataclass_Rtti;
dataclass_Rtti.__name__ = true;
dataclass_Rtti.rttiData = function(cls) {
	return haxe_rtti_Meta.getType(cls)["dataClassRtti"][0];
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = true;
var haxe_ds_StringMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = true;
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,existsReserved: function(key) {
		if(this.rh == null) {
			return false;
		}
		return this.rh.hasOwnProperty("$" + key);
	}
	,__class__: haxe_ds_StringMap
};
var dataclass_Converter = function(options) {
	if(options == null) {
		options = { };
	}
	this.valueConverters = new haxe_ds_StringMap();
	var this1 = this.valueConverters;
	var value = new dataclass_DateValueConverter(Object.prototype.hasOwnProperty.call(options,"dateFormat") ? options.dateFormat : "%Y-%m-%dT%H:%M:%SZ");
	var _this = this1;
	if(__map_reserved["Date"] != null) {
		_this.setReserved("Date",value);
	} else {
		_this.h["Date"] = value;
	}
	this.circularReferences = Object.prototype.hasOwnProperty.call(options,"circularReferences") ? options.circularReferences : dataclass_CircularReferenceHandling.ThrowException;
};
$hxClasses["dataclass.Converter"] = dataclass_Converter;
dataclass_Converter.__name__ = true;
dataclass_Converter.enumType = function(name) {
	var _this = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.enumCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxEnums[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Enum not found: " + name);
	}
	var _this2 = dataclass_Converter.enumCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.classType = function(name) {
	var _this = dataclass_Converter.classCache;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = dataclass_Converter.classCache;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var output = $hxClasses[name];
	if(output == null) {
		throw new js__$Boot_HaxeError("Class not found: " + name);
	}
	var _this2 = dataclass_Converter.classCache;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,output);
	} else {
		_this2.h[name] = output;
	}
	return output;
};
dataclass_Converter.prototype = {
	toDataClass: function(cls,json) {
		var refCount = new haxe_ds_IntMap();
		var refAssign = new haxe_ds_IntMap();
		var output = this._toDataClass(cls,json,refCount,refAssign);
		this.assignReferences(refCount,refAssign);
		return output;
	}
	,assignReferences: function(refCount,refAssign) {
		var refId = refAssign.keys();
		while(refId.hasNext()) {
			var refId1 = refId.next();
			var _g = 0;
			var _g1 = refAssign.h[refId1];
			while(_g < _g1.length) {
				var data = _g1[_g];
				++_g;
				Reflect.setProperty(refCount.h[refId1],data.field,refCount.h[data.obj]);
			}
		}
	}
	,_toAnonymousStructure: function(cls,inputData,refCount,refAssign,currentId,toDataClass) {
		var rtti = dataclass_Rtti.rttiData(cls);
		var outputData = { };
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var _g = 0;
		var _g1 = Reflect.fields(rtti);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			if(Object.prototype.hasOwnProperty.call(inputData,field)) {
				var input = inputData[field];
				if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && input != null && StringTools.startsWith(rtti[field],"DataClass<") && Object.prototype.hasOwnProperty.call(input,"$ref")) {
					var refData = { obj : Reflect.field(input,"$ref"), field : field};
					if(!refAssign.h.hasOwnProperty(currentId)) {
						refAssign.h[currentId] = [refData];
					} else {
						refAssign.h[currentId].push(refData);
					}
				} else {
					outputData[field] = this.toField(rtti[field],input,refCount,refAssign,toDataClass);
				}
			}
		}
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && !toDataClass && currentId > 0) {
			refCount.h[currentId] = outputData;
		}
		return outputData;
	}
	,_toDataClass: function(cls,json,refCount,refAssign) {
		var inputData = json;
		var currentId = 0;
		if(this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences && Object.prototype.hasOwnProperty.call(inputData,"$id")) {
			currentId = inputData["$id"];
		}
		var output = Type.createInstance(cls,[this._toAnonymousStructure(cls,inputData,refCount,refAssign,currentId,true)]);
		if(currentId > 0 && this.circularReferences == dataclass_CircularReferenceHandling.TrackReferences) {
			refCount.h[currentId] = output;
		}
		return output;
	}
	,toField: function(data,value,refCount,refAssign,toDataClass) {
		if(value == null) {
			if(StringTools.startsWith(data,"Option<")) {
				return haxe_ds_Option.None;
			} else {
				return value;
			}
		}
		var _this = this.valueConverters;
		if(__map_reserved[data] != null ? _this.existsReserved(data) : _this.h.hasOwnProperty(data)) {
			var _this1 = this.valueConverters;
			return (__map_reserved[data] != null ? _this1.getReserved(data) : _this1.h[data]).input(value);
		} else if(Lambda.has(dataclass_Converter.directConversions,data)) {
			return value;
		} else if(StringTools.startsWith(data,"Array<")) {
			var arrayType = data.substring(6,data.length - 1);
			var _g = [];
			var _g1 = 0;
			var _g2 = js_Boot.__cast(value , Array);
			while(_g1 < _g2.length) _g.push(this.toField(arrayType,_g2[_g1++],refCount,refAssign,toDataClass));
			return _g;
		} else if(StringTools.startsWith(data,"Enum<")) {
			return Type.createEnum(dataclass_Converter.enumType(data.substring(5,data.length - 1)),value);
		} else if(StringTools.startsWith(data,"DataClass<")) {
			var classT = dataclass_Converter.classType(data.substring(10,data.length - 1));
			if(toDataClass) {
				return this._toDataClass(classT,value,refCount,refAssign);
			} else {
				return this._toAnonymousStructure(classT,value,refCount,refAssign,0,toDataClass);
			}
		} else if(StringTools.startsWith(data,"Option<")) {
			return haxe_ds_Option.Some(this.toField(data.substring(7,data.length - 1),value,refCount,refAssign,toDataClass));
		} else if(StringTools.startsWith(data,"StringMap<")) {
			var mapType = data.substring(10,data.length - 1);
			var output = new haxe_ds_StringMap();
			var object = value;
			var _g3 = 0;
			var _g11 = Reflect.fields(object);
			while(_g3 < _g11.length) {
				var key = _g11[_g3];
				++_g3;
				var value1 = this.toField(mapType,object[key],refCount,refAssign,toDataClass);
				if(__map_reserved[key] != null) {
					output.setReserved(key,value1);
				} else {
					output.h[key] = value1;
				}
			}
			return output;
		} else if(StringTools.startsWith(data,"IntMap<")) {
			var mapType1 = data.substring(7,data.length - 1);
			var output1 = new haxe_ds_IntMap();
			var object1 = value;
			var _g4 = 0;
			var _g12 = Reflect.fields(object1);
			while(_g4 < _g12.length) {
				var key1 = _g12[_g4];
				++_g4;
				var key2 = Std.parseInt(key1);
				var value2 = this.toField(mapType1,object1[key1],refCount,refAssign,toDataClass);
				output1.h[key2] = value2;
			}
			return output1;
		} else {
			throw new js__$Boot_HaxeError("Unsupported DataClass converter: " + data);
		}
	}
	,__class__: dataclass_Converter
};
var dataclass_DateValueConverter = function(format) {
	this.format = format;
};
$hxClasses["dataclass.DateValueConverter"] = dataclass_DateValueConverter;
dataclass_DateValueConverter.__name__ = true;
dataclass_DateValueConverter.getTimeZone = function() {
	var now = new Date();
	now = new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);
	return 86400000. * Math.round(now.getTime() / 24 / 3600 / 1000) - now.getTime();
};
dataclass_DateValueConverter.prototype = {
	input: function(input) {
		var s = StringTools.trim(input);
		if(StringTools.endsWith(s,"Z")) {
			return new Date(s);
		}
		return HxOverrides.strDate(s);
	}
	,output: function(input) {
		var time;
		if(StringTools.endsWith(this.format,"Z")) {
			var t = -dataclass_DateValueConverter.getTimeZone();
			time = new Date(input.getTime() + t);
		} else {
			time = input;
		}
		return DateTools.format(time,this.format);
	}
	,__class__: dataclass_DateValueConverter
};
var dataclass_JsonConverter = function(options) {
	dataclass_Converter.call(this,options);
};
$hxClasses["dataclass.JsonConverter"] = dataclass_JsonConverter;
dataclass_JsonConverter.__name__ = true;
dataclass_JsonConverter.fromJson = function(cls,json) {
	return dataclass_JsonConverter.current.toDataClass(cls,json);
};
dataclass_JsonConverter.__super__ = dataclass_Converter;
dataclass_JsonConverter.prototype = $extend(dataclass_Converter.prototype,{
	__class__: dataclass_JsonConverter
});
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = true;
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	keys: function() {
		var a = [];
		for( var key in this.h ) if(this.h.hasOwnProperty(key)) {
			a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_Option = $hxEnums["haxe.ds.Option"] = { __ename__ : true, __constructs__ : ["Some","None"]
	,Some: ($_=function(v) { return {_hx_index:0,v:v,__enum__:"haxe.ds.Option",toString:$estr}; },$_.__params__ = ["v"],$_)
	,None: {_hx_index:1,__enum__:"haxe.ds.Option",toString:$estr}
};
var haxe_rtti_Meta = function() { };
$hxClasses["haxe.rtti.Meta"] = haxe_rtti_Meta;
haxe_rtti_Meta.__name__ = true;
haxe_rtti_Meta.getType = function(t) {
	var meta = haxe_rtti_Meta.getMeta(t);
	if(meta == null || meta.obj == null) {
		return { };
	} else {
		return meta.obj;
	}
};
haxe_rtti_Meta.getMeta = function(t) {
	return t.__meta__;
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
$hxClasses["js._Boot.HaxeError"] = js__$Boot_HaxeError;
js__$Boot_HaxeError.__name__ = true;
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = true;
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s += "\t";
				var tmp = n + "(";
				var _g = [];
				var _g1 = 0;
				var _g2 = con.__params__;
				while(_g1 < _g2.length) {
					var p = _g2[_g1];
					++_g1;
					_g.push(js_Boot.__string_rec(o[p],s));
				}
				return tmp + _g.join(",") + ")";
			} else {
				return n;
			}
		}
		if((o instanceof Array)) {
			var l = o.length;
			var i;
			var str = "[";
			s += "\t";
			var _g11 = 0;
			var _g3 = l;
			while(_g11 < _g3) {
				var i1 = _g11++;
				str += (i1 > 0 ? "," : "") + js_Boot.__string_rec(o[i1],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e1 ) {
			var e2 = (e1 instanceof js__$Boot_HaxeError) ? e1.val : e1;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str1 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str1.length != 2) {
			str1 += ", \n";
		}
		str1 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str1 += "\n" + s + "}";
		return str1;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = intf[_g1++];
			if(i == cl || js_Boot.__interfLoop(i,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		if((o instanceof Array)) {
			return o.__enum__ == null;
		} else {
			return false;
		}
		break;
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return true;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if((o instanceof cl)) {
					return true;
				}
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if((o instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return $hxEnums[o.__enum__] == cl;
	}
};
js_Boot.__cast = function(o,t) {
	if(js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw new js__$Boot_HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var mithril__$M_M_$Impl_$ = function() { };
$hxClasses["mithril._M.M_Impl_"] = mithril__$M_M_$Impl_$;
mithril__$M_M_$Impl_$.__name__ = true;
mithril__$M_M_$Impl_$.routeLink = function(vnode) {
	return m.route.link(vnode);
};
var mithril_Mithril = function() { };
$hxClasses["mithril.Mithril"] = mithril_Mithril;
mithril_Mithril.__name__ = true;
var ui_ClientUI = function() {
};
$hxClasses["ui.ClientUI"] = ui_ClientUI;
ui_ClientUI.__name__ = true;
ui_ClientUI.__interfaces__ = [mithril_Mithril];
ui_ClientUI.prototype = {
	init: function() {
		var element = ($_=window.document,$bind($_,$_.querySelector));
		m.mount(element("header"),new ui_UIHeader());
		m.mount(element("main"),new ui_UIMain());
	}
	,__class__: ui_ClientUI
};
var ui_UIMain = function() {
};
$hxClasses["ui.UIMain"] = ui_UIMain;
ui_UIMain.__name__ = true;
ui_UIMain.__interfaces__ = [mithril_Mithril];
ui_UIMain.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [new ui_content_ContentTreeView(data_ContentModel.instance.content).view(),new ui_content_ContentTreeView(data_ContentFilters.sort(data_ContentModel.instance.content)).view(),new ui_content_ContentTreeView(data_ContentFilters.fiterRoomAndShelfHome(data_ContentModel.instance.content)).view()];
	}
	,__class__: ui_UIMain
};
var ui_StateMonitor = function() {
};
$hxClasses["ui.StateMonitor"] = ui_StateMonitor;
ui_StateMonitor.__name__ = true;
ui_StateMonitor.__interfaces__ = [mithril_Mithril];
ui_StateMonitor.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("div",[m.m("div","Statemonitor")]);
	}
	,__class__: ui_StateMonitor
};
var ui_MInputEmail = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputEmail"] = ui_MInputEmail;
ui_MInputEmail.__name__ = true;
ui_MInputEmail.__interfaces__ = [mithril_Mithril];
ui_MInputEmail.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=input][placeholder='Email']#email",{ style : { backgroundColor : this.state.validEmail ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserEmail_UserEmail_$Impl_$.isValid(str);
		console.log("src/ui/UIHeader.hx:17:","" + str + " Is valid email: " + (valid == null ? "null" : "" + valid));
		this.state.email = str;
		this.state.validEmail = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputEmail
};
var ui_MInputPassword = function(state) {
	this.state = state;
};
$hxClasses["ui.MInputPassword"] = ui_MInputPassword;
ui_MInputPassword.__name__ = true;
ui_MInputPassword.__interfaces__ = [mithril_Mithril];
ui_MInputPassword.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("input[type=password][placeholder='Password']#password",{ style : { backgroundColor : this.state.validPassword ? "" + "#dfd" : "" + "white"}, onkeyup : function(e) {
			return _gthis.validate(e);
		}, onchange : function(e1) {
			return _gthis.validate(e1);
		}, autofill : function(e2) {
			return _gthis.validate(e2);
		}});
	}
	,validate: function(e) {
		var str = e.target.value;
		var valid = utils__$UserPassword_UserPassword_$Impl_$.isValid(str);
		this.state.password = str;
		this.state.validPassword = valid;
		m.redraw();
		return valid;
	}
	,__class__: ui_MInputPassword
};
var ui_MLoginForm = function() {
	this.submitCallback = function(email,password) {
		console.log("src/ui/UIHeader.hx:64:","callback " + email + ", " + password);
		return;
	};
	this.state = null;
	this.state = { email : "", validEmail : false, password : "", validPassword : false};
};
$hxClasses["ui.MLoginForm"] = ui_MLoginForm;
ui_MLoginForm.__name__ = true;
ui_MLoginForm.__interfaces__ = [mithril_Mithril];
ui_MLoginForm.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var enabled = this.state.validEmail && this.state.validPassword;
		var disabledString = enabled ? "" : "[disabled]";
		return m.m("form",[m.m("button[type=button]",{ onclick : function(e) {
			_gthis.submitCallback("jonasnys@gmail.com","123456");
			return;
		}},"J"),new ui_MInputEmail(this.state).view(),new ui_MInputPassword(this.state).view(),m.m("button[type=button]" + disabledString,{ onclick : function(e1) {
			_gthis.submitCallback(_gthis.state.email,_gthis.state.password);
			return;
		}},"Logga in")]);
	}
	,__class__: ui_MLoginForm
};
var ui_MLogoutForm = function(clientUser) {
	this.clientUser = clientUser;
};
$hxClasses["ui.MLogoutForm"] = ui_MLogoutForm;
ui_MLogoutForm.__name__ = true;
ui_MLogoutForm.__interfaces__ = [mithril_Mithril];
ui_MLogoutForm.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		if(this.clientUser == null) {
			return m.m("div","clientUser == null");
		}
		var userData = this.clientUser.userData;
		return m.m("form",[m.m("div",""),m.m("h3","Välkommen, " + userData.firstname + " " + userData.lastname + "!" + " access:" + userData.access + " active domain:" + this.clientUser.userConfig.domain),m.m("button[type=button]",{ onclick : function(e) {
			data_UserLoader.instance.signOut();
			return;
		}},"Logout")]);
	}
	,setUser: function(u) {
		this.clientUser = u;
		return this;
	}
	,__class__: ui_MLogoutForm
};
var ui_UIHeader = function() {
	this.logoutform = null;
	this.loginform = null;
	this.loginform = new ui_MLoginForm();
	this.logoutform = new ui_MLogoutForm();
	this.loginform.submitCallback = function(email,password) {
		data_UserLoader.instance.signIn(email,password);
		return;
	};
};
$hxClasses["ui.UIHeader"] = ui_UIHeader;
ui_UIHeader.__name__ = true;
ui_UIHeader.__interfaces__ = [mithril_Mithril];
ui_UIHeader.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var userView;
		var _g = data_UserModel.instance.clientUserState;
		switch(_g._hx_index) {
		case 0:
			userView = this.loginform.view();
			break;
		case 1:
			userView = m.m("h2",{ style : { textAlign : "right", paddingRight : "1em"}},"Loading user data...");
			break;
		case 2:
			var user = data_UserModel.instance.clientUser;
			userView = this.logoutform.setUser(user).view();
			break;
		}
		return [m.m("h1","Headertext"),userView];
	}
	,__class__: ui_UIHeader
};
var ui_content_ContentTreeView = function(content) {
	this.content = content;
};
$hxClasses["ui.content.ContentTreeView"] = ui_content_ContentTreeView;
ui_content_ContentTreeView.__name__ = true;
ui_content_ContentTreeView.__interfaces__ = [mithril_Mithril];
ui_content_ContentTreeView.parsePath = function(p) {
	var segments = p.split("/");
	return { treeId : segments == null ? null : 0 > segments.length - 1 ? null : segments[0], roomId : segments == null ? null : 1 > segments.length - 1 ? null : segments[1], shelfId : segments == null ? null : 2 > segments.length - 1 ? null : segments[2], bookId : segments == null ? null : 3 > segments.length - 1 ? null : segments[3], chapterId : segments == null ? null : 4 > segments.length - 1 ? null : segments[4], subchapterId : segments == null ? null : 5 > segments.length - 1 ? null : segments[5]};
};
ui_content_ContentTreeView.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var path = this.content.id;
		return m.m("details[open]",[m.m("summary","Content " + this.content.id)].concat(this.content.rooms.map(function(child) {
			return new ui_content_UIRoom(child,path).view();
		})));
	}
	,__class__: ui_content_ContentTreeView
};
var ui_content_UIRoom = function(item,parentPath) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
};
$hxClasses["ui.content.UIRoom"] = ui_content_UIRoom;
ui_content_UIRoom.__name__ = true;
ui_content_UIRoom.__interfaces__ = [mithril_Mithril];
ui_content_UIRoom.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var children = this.item.shelves != null ? this.item.shelves : [];
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["room",objPath.treeId,objPath.roomId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Room:" + this.item.title + ":" + itemPath);
		return m.m("details[open]",[m.m("summary",[anchor])].concat(children.map(function(child) {
			return new ui_content_UIShelf(child,_gthis.path).view();
		})));
	}
	,__class__: ui_content_UIRoom
};
var ui_content_UIShelf = function(item,parentPath) {
	this.item = item;
	this.path = parentPath + "/" + item.id;
};
$hxClasses["ui.content.UIShelf"] = ui_content_UIShelf;
ui_content_UIShelf.__name__ = true;
ui_content_UIShelf.__interfaces__ = [mithril_Mithril];
ui_content_UIShelf.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var books = this.item.books != null ? this.item.books : [];
		var css = "access" + this.item.access;
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["shelf",objPath.treeId,objPath.roomId,objPath.shelfId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Shelf:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + css,[m.m("summary",[anchor])].concat(books.map(function(child) {
			return new ui_content_UIBook(child,_gthis.path).view();
		})));
	}
	,__class__: ui_content_UIShelf
};
var ui_content_UIBook = function(item,parentPath) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
};
$hxClasses["ui.content.UIBook"] = ui_content_UIBook;
ui_content_UIBook.__name__ = true;
ui_content_UIBook.__interfaces__ = [mithril_Mithril];
ui_content_UIBook.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.chapters != null ? this.item.chapters : [];
		var css = "access" + this.item.access;
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["book",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Book:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child,_gthis.path).view();
		})));
	}
	,__class__: ui_content_UIBook
};
var ui_content_UIChapter = function(item,parentPath) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
};
$hxClasses["ui.content.UIChapter"] = ui_content_UIChapter;
ui_content_UIChapter.__name__ = true;
ui_content_UIChapter.__interfaces__ = [mithril_Mithril];
ui_content_UIChapter.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.subchapters != null ? this.item.subchapters : [];
		var css = "access" + this.item.access;
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["chapter",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId,objPath.chapterId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Chapter:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UISubchapter(child,_gthis.path).view();
		})));
	}
	,__class__: ui_content_UIChapter
};
var ui_content_UISubchapter = function(item,parentPath) {
	this.item = null;
	this.item = item;
	this.path = parentPath + "/" + item.id;
};
$hxClasses["ui.content.UISubchapter"] = ui_content_UISubchapter;
ui_content_UISubchapter.__name__ = true;
ui_content_UISubchapter.__interfaces__ = [mithril_Mithril];
ui_content_UISubchapter.prototype = {
	view: function() {
		var _gthis = this;
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		var chapters = this.item.subchapters != null ? this.item.subchapters : [];
		var css = "access" + this.item.access;
		var objPath = ui_content_ContentTreeView.parsePath(this.path);
		var itemPath = "/" + ["subchapter",objPath.treeId,objPath.roomId,objPath.shelfId,objPath.bookId,objPath.chapterId,objPath.subchapterId].join("/");
		var anchor = m.m("a",{ href : itemPath, oncreate : mithril__$M_M_$Impl_$.routeLink},"Subhapter:" + this.item.title + ":" + itemPath);
		return m.m("details[open]." + css,[m.m("summary",[anchor])].concat(chapters.map(function(child) {
			return new ui_content_UIChapter(child,_gthis.path).view();
		})));
	}
	,__class__: ui_content_UISubchapter
};
var utils__$UserEmail_UserEmail_$Impl_$ = {};
$hxClasses["utils._UserEmail.UserEmail_Impl_"] = utils__$UserEmail_UserEmail_$Impl_$;
utils__$UserEmail_UserEmail_$Impl_$.__name__ = true;
utils__$UserEmail_UserEmail_$Impl_$.isValid = function(address) {
	return utils__$UserEmail_UserEmail_$Impl_$.ereg.match(address);
};
var utils__$UserPassword_UserPassword_$Impl_$ = {};
$hxClasses["utils._UserPassword.UserPassword_Impl_"] = utils__$UserPassword_UserPassword_$Impl_$;
utils__$UserPassword_UserPassword_$Impl_$.__name__ = true;
utils__$UserPassword_UserPassword_$Impl_$.isValid = function(str) {
	return str.length > 3;
};
function $getIterator(o) { if( o instanceof Array ) return HxOverrides.iter(o); else return o.iterator(); }
var $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$hxClasses["Math"] = Math;
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = true;
$hxClasses["Array"] = Array;
Array.__name__ = true;
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = ["Date"];
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
var __map_reserved = {};
Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{ get : function() {
	return String(this.val);
}});
try {
var __varName = window.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName);
} catch(_) {}
try {
GLOBAL.m = require("mithril");
var __varName1 = GLOBAL.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName1);
} catch(_) {}
DateTools.DAY_SHORT_NAMES = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
DateTools.DAY_NAMES = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
DateTools.MONTH_SHORT_NAMES = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
DateTools.MONTH_NAMES = ["January","February","March","April","May","June","July","August","September","October","November","December"];
data_UserData.__meta__ = { obj : { dataClassRtti : [{ firstname : "String", lastname : "String", email : "String", domains : "Array<String>", access : "Int"}]}};
data_UserConfig.__meta__ = { obj : { dataClassRtti : [{ domain : "String"}]}};
data_ClientUser.__meta__ = { obj : { dataClassRtti : [{ userData : "DataClass<data.UserData>", userConfig : "DataClass<data.UserConfig>"}]}};
data_Content.__meta__ = { obj : { dataClassRtti : [{ id : "String", rooms : "Array<DataClass<data.Room>>"}]}};
data_Content.uid = 1;
data_Room.__meta__ = { obj : { dataClassRtti : [{ id : "String", shelves : "Array<DataClass<data.Shelf>>", title : "String", color : "String", textcolor : "String", sort : "Int"}]}};
data_Shelf.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", info : "String", books : "Array<DataClass<data.Book>>", sort : "Int"}]}};
data_Book.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "String", info : "String", chapters : "Array<DataClass<data.Chapter>>", sort : "Int"}]}};
data_Chapter.__meta__ = { obj : { dataClassRtti : [{ id : "String", title : "String", access : "Int", type : "String", info : "String", text : "String", subchapters : "Array<DataClass<data.Chapter>>", sort : "Int"}]}};
data_ErrorsAndLogs.element = ($_=window.document,$bind($_,$_.querySelector));
data_ErrorsAndLogs.logs = [];
data_ErrorsAndLogs.errors = [];
data_ContentModel.instance = new data_ContentModel();
data_ContentModel.defaultData = { id : "startup", rooms : [{ id : "home", title : "Room HOME", sort : 1, shelves : [{ id : "sh", title : "sh", access : 0, sort : 0, books : [{ id : "book", title : "book", access : 0, chapters : [{ id : "ch", title : "ch", access : 0, subchapters : [{ id : "sch", title : "sch", access : 0}]}]}]},{ id : "home", title : "Shelf HOME", access : 1, sort : 1, books : [{ id : "book", title : "book", access : 0, chapters : [{ id : "ch", title : "ch", access : 0, subchapters : [{ id : "sch", title : "sch", access : 0}]}]}]}]},{ id : "startup", title : "Startup", sort : 0, shelves : [{ id : "shelf0", access : 0, title : "Shelf 0", sort : 1, books : [{ id : "book0", title : "Book Zero", access : 0, chapters : [{ id : "chapter0", title : "Chapter Zero", access : 0, subchapters : [{ id : "subchapter0", title : "Subchapter Zero", access : 0},{ id : "subchapter1", title : "Subchapter One", access : 1},{ id : "subchapter2", title : "Subchapter Two", access : 2}]},{ id : "chapter1", title : "Chapter One", access : 1, subchapters : [{ id : "subchapter0", title : "Subchapter Zero", access : 0},{ id : "subchapter1", title : "Subchapter One", access : 1}]},{ id : "chapter1", title : "Chapter One", access : 2, subchapters : [{ id : "subchapter0", title : "Subchapter Zero", access : 0}]}]},{ id : "book1", title : "Book One", access : 1, chapters : [{ id : "chapter0", title : "Chapter Zero", access : 0, subchapters : [{ id : "subchapter0", title : "Subchapter Zero", access : 0}]}]},{ id : "book2", title : "Book Two", access : 2, chapters : [{ id : "chapter0", title : "Chapter Zero", access : 0, subchapters : [{ id : "subchapter0", title : "Subchapter Zero", access : 0}]}]}]}]}]};
data_UserLoader.instance = new data_UserLoader();
data_UserModel.instance = new data_UserModel();
dataclass_Converter.directConversions = ["Int","Bool","Float","String"];
dataclass_Converter.enumCache = new haxe_ds_StringMap();
dataclass_Converter.classCache = new haxe_ds_StringMap();
dataclass_JsonConverter.current = new dataclass_JsonConverter();
js_Boot.__toStr = ({ }).toString;
ui_ClientUI.instance = new ui_ClientUI();
utils__$UserEmail_UserEmail_$Impl_$.ereg = new EReg("^[\\w-\\.]{2,}@[\\w-\\.]{2,}\\.[a-z]{2,6}$","i");
Client.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
