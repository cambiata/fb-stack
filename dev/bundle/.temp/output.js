// Generated by Haxe 4.0.0-preview.4+1e3e5e016
(function () { "use strict";
var $hxEnums = {};
var mithril_Mithril = function() { };
var BundlePage = function() {
};
BundlePage.__interfaces__ = [mithril_Mithril];
BundlePage.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [m.m("h1","This is a BundlePage")];
	}
};
var Main = function() {
	data_ClassMap.instance.setClass("test",Test);
	haxe_Timer.delay(function() {
		return Require.module("BundlePage").then(function(id) {
			var _ = BundlePage = $s.BundlePage;
			return id;
		}).then(function(_1) {
			data_ClassMap.instance.setClass("test",BundlePage);
			m.redraw();
			return;
		});
	},2000);
	m.mount(window.document.body,new Index());
};
Main.main = function() {
	new Main();
};
var Index = function() {
};
Index.__interfaces__ = [mithril_Mithril];
Index.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return [m.m("h1","Index"),data_ClassMap.instance.getNew("test").view()];
	}
};
var Test = function() {
};
Test.__interfaces__ = [mithril_Mithril];
Test.prototype = {
	view: function() {
		if(arguments.length > 0 && arguments[0].tag != this) return arguments[0].tag.view.apply(arguments[0].tag, arguments);
		return m.m("h1","Test");
	}
};
var haxe_IMap = function() { };
var haxe_ds_StringMap = function() {
	this.h = { };
};
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,existsReserved: function(key) {
		if(this.rh == null) {
			return false;
		}
		return this.rh.hasOwnProperty("$" + key);
	}
	,remove: function(key) {
		if(__map_reserved[key] != null) {
			key = "$" + key;
			if(this.rh == null || !this.rh.hasOwnProperty(key)) {
				return false;
			}
			delete(this.rh[key]);
			return true;
		} else {
			if(!this.h.hasOwnProperty(key)) {
				return false;
			}
			delete(this.h[key]);
			return true;
		}
	}
};
var Require = function() { };
Require.module = function(name) {
	var _this = Require.loaded;
	if(__map_reserved[name] != null ? _this.existsReserved(name) : _this.h.hasOwnProperty(name)) {
		var _this1 = Require.loaded;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	var p = new Promise(function(resolve,reject) {
		var doc = window.document;
		var script = null;
		var hasFailed = false;
		var resourceLoaded = function(_) {
			resolve(name);
		};
		var resourceFailed = function(_1) {
			if(!hasFailed) {
				hasFailed = true;
				Require.loaded.remove(name);
				doc.body.removeChild(script);
				reject(name);
			}
		};
		script = doc.createElement("script");
		script.onload = resourceLoaded;
		script.onerror = resourceFailed;
		script.src = Require.jsPath + name + Require.jsExt;
		doc.body.appendChild(script);
	});
	var _this2 = Require.loaded;
	if(__map_reserved[name] != null) {
		_this2.setReserved(name,p);
	} else {
		_this2.h[name] = p;
	}
	return p;
};
var Type = function() { };
Type.createInstance = function(cl,args) {
	return new (Function.prototype.bind.apply(cl,[null].concat(args)));
};
var data_ClassMap = function() {
	this.classes = new haxe_ds_StringMap();
};
data_ClassMap.prototype = {
	getNew: function(cls,args) {
		var _this = this.classes;
		return Type.createInstance(__map_reserved[cls] != null ? _this.getReserved(cls) : _this.h[cls],args);
	}
	,setClass: function(name,cls) {
		var _this = this.classes;
		if(__map_reserved[name] != null) {
			_this.setReserved(name,cls);
		} else {
			_this.h[name] = cls;
		}
	}
};
var haxe_Timer = function(time_ms) {
	var me = this;
	this.id = setInterval(function() {
		me.run();
	},time_ms);
};
haxe_Timer.delay = function(f,time_ms) {
	var t = new haxe_Timer(time_ms);
	t.run = function() {
		t.stop();
		f();
	};
	return t;
};
haxe_Timer.prototype = {
	stop: function() {
		if(this.id == null) {
			return;
		}
		clearInterval(this.id);
		this.id = null;
	}
	,run: function() {
	}
};
try {
var __varName = window.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName);
} catch(_) {}
try {
GLOBAL.m = require("mithril");
var __varName1 = GLOBAL.m;
(function(m) {
			if (m.m) return;
			m.m = function() {
				try { 
					for(var i=0; i < arguments.length; ++i) if(arguments[i] instanceof List) {
						var list = arguments[i].h; arguments[i] = [];
						while(list != null) { arguments[i].push(l[0]); list = l[1]; }
					}
				} catch(e) {}
				return m.apply(this, arguments);
			}
		})(__varName1);
} catch(_) {}
var __map_reserved = {};
Require.jsPath = "./";
Require.jsExt = ".js";
Require.loaded = new haxe_ds_StringMap();
data_ClassMap.instance = new data_ClassMap();
Main.main();
})();
